window.spb=function(r){var n={};function e(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return r[t].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=r,e.c=n,e.d=function(r,n,t){e.o(r,n)||Object.defineProperty(r,n,{enumerable:!0,get:t})},e.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},e.t=function(r,n){if(1&n&&(r=e(r)),8&n)return r;if(4&n&&"object"==typeof r&&r&&r.__esModule)return r;var t=Object.create(null);if(e.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:r}),2&n&&"string"!=typeof r)for(var i in r)e.d(t,i,function(n){return r[n]}.bind(null,i));return t},e.n=function(r){var n=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(n,"a",n),n},e.o=function(r,n){return{}.hasOwnProperty.call(r,n)},e.p="",e(e.s=0)}([function(r,n,e){"use strict";e.r(n);var t={};function i(){return window.navigator.mockUserAgent||window.navigator.userAgent}function o(r){return void 0===r&&(r=i()),r.indexOf("Opera Mini")>-1}function f(){return(f=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var t in e)({}).hasOwnProperty.call(e,t)&&(r[t]=e[t])}return r}).apply(this,arguments)}function u(r){try{if(!r)return!1;if("undefined"!=typeof Promise&&r instanceof Promise)return!0;if("undefined"!=typeof window&&window.Window&&r instanceof window.Window)return!1;if("undefined"!=typeof window&&window.constructor&&r instanceof window.constructor)return!1;var n={}.toString;if(n){var e=n.call(r);if("[object Window]"===e||"[object global]"===e||"[object DOMWindow]"===e)return!1}if("function"==typeof r.then)return!0}catch(r){return!1}return!1}e.r(t),e.d(t,"WeakMap",function(){return S});var c,a=[],s=[],h=0;function d(){if(!h&&c){var r=c;c=null,r.resolve()}}function w(){h+=1}function v(){h-=1,d()}var z=function(){function r(r){var n=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],r){var e,t,i=!1,o=!1,f=!1;w();try{r(function(r){f?n.resolve(r):(i=!0,e=r)},function(r){f?n.reject(r):(o=!0,t=r)})}catch(r){return v(),void this.reject(r)}v(),f=!0,i?this.resolve(e):o&&this.reject(t)}}var n=r.prototype;return n.resolve=function(r){if(this.resolved||this.rejected)return this;if(u(r))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=r,this.dispatch(),this},n.reject=function(r){var n=this;if(this.resolved||this.rejected)return this;if(u(r))throw new Error("Can not reject promise with another promise");if(!r){var e=r&&"function"==typeof r.toString?r.toString():{}.toString.call(r);r=new Error("Expected reject to be called with Error, got "+e)}return this.rejected=!0,this.error=r,this.errorHandled||setTimeout(function(){n.errorHandled||function(r,n){if(-1===a.indexOf(r)){a.push(r),setTimeout(function(){throw r},1);for(var e=0;e<s.length;e++)s[e](r,n)}}(r,n)},1),this.dispatch(),this},n.asyncReject=function(r){return this.errorHandled=!0,this.reject(r),this},n.dispatch=function(){var n=this,e=this.resolved,t=this.rejected,i=this.handlers;if(!this.dispatching&&(e||t)){this.dispatching=!0,w();for(var o=function(o){var f=i[o],c=f.onSuccess,a=f.onError,s=f.promise,h=void 0;if(e)try{h=c?c(n.value):n.value}catch(r){return s.reject(r),"continue"}else if(t){if(!a)return s.reject(n.error),"continue";try{h=a(n.error)}catch(r){return s.reject(r),"continue"}}h instanceof r&&(h.resolved||h.rejected)?(h.resolved?s.resolve(h.value):s.reject(h.error),h.errorHandled=!0):u(h)?h instanceof r&&(h.resolved||h.rejected)?h.resolved?s.resolve(h.value):s.reject(h.error):h.then(function(r){s.resolve(r)},function(r){s.reject(r)}):s.resolve(h)},f=0;f<i.length;f++)o(f);i.length=0,this.dispatching=!1,v()}},n.then=function(n,e){if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.then expected a function for success handler");if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.then expected a function for error handler");var t=new r;return this.handlers.push({promise:t,onSuccess:n,onError:e}),this.errorHandled=!0,this.dispatch(),t},n.catch=function(r){return this.then(void 0,r)},n.finally=function(n){if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.finally expected a function");return this.then(function(e){return r.try(n).then(function(){return e})},function(e){return r.try(n).then(function(){throw e})})},n.timeout=function(r,n){var e=this;if(this.resolved||this.rejected)return this;var t=setTimeout(function(){e.resolved||e.rejected||e.reject(n||new Error("Promise timed out after "+r+"ms"))},r);return this.then(function(r){return clearTimeout(t),r})},n.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},r.resolve=function(n){return n instanceof r?n:u(n)?new r(function(r,e){return n.then(r,e)}):(new r).resolve(n)},r.reject=function(n){return(new r).reject(n)},r.asyncReject=function(n){return(new r).asyncReject(n)},r.all=function(n){var e=new r,t=n.length,i=[];if(!t)return e.resolve(i),e;for(var o=function(o){var f=n[o];if(f instanceof r){if(f.resolved)return i[o]=f.value,t-=1,"continue"}else if(!u(f))return i[o]=f,t-=1,"continue";r.resolve(f).then(function(r){i[o]=r,0==(t-=1)&&e.resolve(i)},function(r){e.reject(r)})},f=0;f<n.length;f++)o(f);return 0===t&&e.resolve(i),e},r.hash=function(n){var e={};return r.all(Object.keys(n).map(function(t){return r.resolve(n[t]).then(function(r){e[t]=r})})).then(function(){return e})},r.map=function(n,e){return r.all(n.map(e))},r.onPossiblyUnhandledException=function(r){return function(r){return s.push(r),{cancel:function(){s.splice(s.indexOf(r),1)}}}(r)},r.try=function(n,e,t){if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.try expected a function");var i;w();try{i=n.apply(e,t||[])}catch(n){return v(),r.reject(n)}return v(),r.resolve(i)},r.delay=function(n){return new r(function(r){setTimeout(r,n)})},r.isPromise=function(n){return!!(n&&n instanceof r)||u(n)},r.flush=function(){return n=c=c||new r,d(),n;var n},r}(),p={u:"mock:",h:"file:",v:"about:"},l="Call was rejected by callee.\r\n";function y(r){return void 0===r&&(r=window),r.location.protocol===p.v}function E(r){if(r)try{if(r.parent&&r.parent!==r)return r.parent}catch(r){}}function m(r){try{return!0}catch(r){}return!1}function b(r){var n=(r=r||window).location;if(!n)throw new Error("Can not read window location");var e=n.protocol;if(!e)throw new Error("Can not read window protocol");if(e===p.h)return p.h+"//";if(e===p.v){var t=E(r);return t&&m()?b(t):p.v+"//"}var i=n.host;if(!i)throw new Error("Can not read window host");return e+"//"+i}function O(r){var n=b(r=r||window);return n&&r.mockDomain&&0===r.mockDomain.indexOf(p.u)?r.mockDomain:n}function C(r,n){if(!r||!n)return!1;var e=E(n);return e?e===r:-1!==function(r){var n=[];try{for(;r.parent!==r;)n.push(r.parent),r=r.parent}catch(r){}return n}(n).indexOf(r)}function T(r){if(r){try{if(r.top)return r.top}catch(r){}if(E(r)===r)return r;try{if(C(window,r)&&window.top)return window.top}catch(r){}try{if(C(r,window)&&window.top)return window.top}catch(r){}for(var n=0,e=function r(n){for(var e=[],t=0,i=function(r){var n,e,t=[];try{n=r.frames}catch(e){n=r}try{e=n.length}catch(r){}if(0===e)return t;if(e){for(var i=0;i<e;i++){var o=void 0;try{o=n[i]}catch(r){continue}t.push(o)}return t}for(var f=0;f<100;f++){var u=void 0;try{u=n[f]}catch(r){return t}if(!u)return t;t.push(u)}return t}(n);t<i.length;t++){var o=i[t];e.push(o);for(var f=0,u=r(o);f<u.length;f++)e.push(u[f])}return e}(r);n<e.length;n++){var t=e[n];try{if(t.top)return t.top}catch(r){}if(E(t)===t)return t}}}var A=[],R=[];function N(r,n){void 0===n&&(n=!0);try{if(r===window)return!1}catch(r){return!0}try{if(!r)return!0}catch(r){return!0}try{if(r.closed)return!0}catch(r){return!r||r.message!==l}if(n&&function(r){if(!function(r){try{if(r===window)return!0}catch(r){}try{var n=Object.getOwnPropertyDescriptor(r,"location");if(n&&!1===n.enumerable)return!1}catch(r){}try{if(y(r)&&m())return!0}catch(r){}try{if(b(r)===b(window))return!0}catch(r){}return!1}(r))return!1;try{if(r===window)return!0;if(y(r)&&m())return!0;if(O(window)===O(r))return!0}catch(r){}return!1}(r))try{if(r.mockclosed)return!0}catch(r){}try{if(!r.parent||!r.top)return!0}catch(r){}var e=function(r,n){for(var e=0;e<r.length;e++)try{if(r[e]===n)return e}catch(r){}return-1}(A,r);if(-1!==e){var t=R[e];if(t&&function(r){if(!r.contentWindow)return!0;if(!r.parentNode)return!0;var n=r.ownerDocument;return!(!n||!n.documentElement||n.documentElement.contains(r))}(t))return!0}return!1}function _(r){try{if(r===window)return!0}catch(r){if(r&&r.message===l)return!0}try{if("[object Window]"==={}.toString.call(r))return!0}catch(r){if(r&&r.message===l)return!0}try{if(window.Window&&r instanceof window.Window)return!0}catch(r){if(r&&r.message===l)return!0}try{if(r&&r.self===r)return!0}catch(r){if(r&&r.message===l)return!0}try{if(r&&r.parent===r)return!0}catch(r){if(r&&r.message===l)return!0}try{if(r&&r.top===r)return!0}catch(r){if(r&&r.message===l)return!0}return!1}function j(r,n){for(var e=0;e<r.length;e++)try{if(r[e]===n)return e}catch(r){}return-1}var D,P=Object.defineProperty,k=Date.now()%1e9,S=function(){function r(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,k+=1,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__"+k,function(){if("undefined"==typeof WeakMap)return!1;if(void 0===Object.freeze)return!1;try{var r=new WeakMap,n={};return Object.freeze(n),r.set(n,"__testvalue__"),"__testvalue__"===r.get(n)}catch(r){return!1}}())try{this.weakmap=new WeakMap}catch(r){}this.keys=[],this.values=[]}var n=r.prototype;return n._cleanupClosedWindows=function(){for(var r=this.weakmap,n=this.keys,e=0;e<n.length;e++){var t=n[e];if(_(t)&&N(t)){if(r)try{r.delete(t)}catch(r){}n.splice(e,1),this.values.splice(e,1),e-=1}}},n.isSafeToReadWrite=function(r){return!_(r)},n.set=function(r,n){if(!r)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{e.set(r,n)}catch(r){delete this.weakmap}if(this.isSafeToReadWrite(r)){var t=this.name,i=r[t];i&&i[0]===r?i[1]=n:P(r,t,{value:[r,n],writable:!0})}else{this._cleanupClosedWindows();var o=this.keys,f=this.values,u=j(o,r);-1===u?(o.push(r),f.push(n)):f[u]=n}},n.get=function(r){if(!r)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{if(n.has(r))return n.get(r)}catch(r){delete this.weakmap}if(!this.isSafeToReadWrite(r)){this._cleanupClosedWindows();var e=j(this.keys,r);if(-1===e)return;return this.values[e]}var t=r[this.name];if(t&&t[0]===r)return t[1]},n.delete=function(r){if(!r)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{n.delete(r)}catch(r){delete this.weakmap}if(this.isSafeToReadWrite(r)){var e=r[this.name];e&&e[0]===r&&(e[0]=e[1]=void 0)}else{this._cleanupClosedWindows();var t=this.keys,i=j(t,r);-1!==i&&(t.splice(i,1),this.values.splice(i,1))}},n.has=function(r){if(!r)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{if(n.has(r))return!0}catch(r){delete this.weakmap}if(this.isSafeToReadWrite(r)){var e=r[this.name];return!(!e||e[0]!==r)}return this._cleanupClosedWindows(),-1!==j(this.keys,r)},n.getOrSet=function(r,n){if(this.has(r))return this.get(r);var e=n();return this.set(r,e),e},r}();function I(r,n){var e=this;void 0===n&&(n={});var t=new S;function i(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];var f=t.getOrSet(n.thisNamespace?this:r,function(){return{}}),u=function(r){try{return JSON.stringify([].slice.call(r),function(r,n){return"function"==typeof n?"memoize["+function(r){if(D=D||new S,null==r||"object"!=typeof r&&"function"!=typeof r)throw new Error("Invalid object");var n,e=D.get(r);return e||(e=typeof r+":"+(n="0123456789abcdef","xxxxxxxxxx".replace(/./g,function(){return n.charAt(Math.floor(Math.random()*n.length))})+"_"+function(r){if("function"==typeof btoa)return btoa(r);if("undefined"!=typeof Buffer)return Buffer.from(r,"utf8").toString("base64");throw new Error("Can not find window.btoa or Buffer")}((new Date).toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()),D.set(r,e)),e}(n)+"]":n})}catch(r){throw new Error("Arguments not serializable -- can not be used to memoize")}}(i),c=n.time;if(f[u]&&c&&Date.now()-f[u].time<c&&delete f[u],f[u])return f[u].value;var a=Date.now(),s=r.apply(this,arguments);return f[u]={time:a,value:s},f[u].value}return i.reset=function(){t.delete(n.thisNamespace?e:r)},n.name&&(i.displayName=n.name+":memoized"),i}function M(){}var g={O:13};Object.create(Error.prototype);var x,U={C:"content-type",T:"accept"},L=[];function B(r){var n=r.url,e=r.method,t=void 0===e?"get":e,i=r.headers,o=void 0===i?{}:i,f=r.json,u=r.data,c=r.body,a=r.win,s=void 0===a?window:a,h=r.timeout,d=void 0===h?0:h;return new z(function(r,e){if(f&&u||f&&c||u&&f)throw new Error("Only options.json or options.data or options.body should be passed");for(var i={},a=0,h=Object.keys(o);a<h.length;a++){var w=h[a];i[w.toLowerCase()]=o[w]}f?i[U.C]=i[U.C]||"application/json":(u||c)&&(i[U.C]=i[U.C]||"application/x-www-form-urlencoded; charset=utf-8"),i[U.T]=i[U.T]||"application/json";for(var v=0;v<L.length;v++)for(var z=(0,L[v])(),p=0,l=Object.keys(z);p<l.length;p++){var y=l[p];i[y.toLowerCase()]=z[y]}var E=new s.XMLHttpRequest;for(var m in E.addEventListener("load",function(){var i=function(r){void 0===r&&(r="");for(var n={},e=0,t=r.trim().split("\n");e<t.length;e++){var i=t[e].split(":"),o=i[0],f=i.slice(1);n[o.toLowerCase()]=f.join(":").trim()}return n}(this.getAllResponseHeaders());if(!this.status)return e(new Error("Request to "+t.toLowerCase()+" "+n+" failed: no response status code."));var o=i["content-type"],f=o&&(0===o.indexOf("application/json")||0===o.indexOf("text/json")),u=this.responseText;try{u=JSON.parse(u)}catch(r){if(f)return e(new Error("Invalid json: "+this.responseText+"."))}return r({status:this.status,headers:i,body:u})},!1),E.addEventListener("error",function(r){e(new Error("Request to "+t.toLowerCase()+" "+n+" failed: "+r.toString()+"."))},!1),E.open(t,n,!0),i)i.hasOwnProperty(m)&&E.setRequestHeader(m,i[m]);f?c=JSON.stringify(f):u&&(c=Object.keys(u).map(function(r){return encodeURIComponent(r)+"="+(u?encodeURIComponent(u[r]):"")}).join("&")),E.timeout=d,E.ontimeout=function(){e(new Error("Request to "+t.toLowerCase()+" "+n+" has timed out"))},E.send(c)})}var W=((x={}).AD=["en","fr","es","zh"],x.AE=["en","fr","es","zh","ar"],x.AG=["en","fr","es","zh"],x.AI=["en","fr","es","zh"],x.AL=["en"],x.AM=["en","fr","es","zh"],x.AN=["en","fr","es","zh"],x.AO=["en","fr","es","zh"],x.AR=["es","en"],x.AT=["de","en"],x.AU=["en"],x.AW=["en","fr","es","zh"],x.AZ=["en","fr","es","zh"],x.BA=["en"],x.BB=["en","fr","es","zh"],x.BE=["en","nl","fr"],x.BF=["fr","en","es","zh"],x.BG=["en"],x.BH=["ar","en","fr","es","zh"],x.BI=["fr","en","es","zh"],x.BJ=["fr","en","es","zh"],x.BM=["en","fr","es","zh"],x.BN=["en"],x.BO=["es","en","fr","zh"],x.BR=["pt","en"],x.BS=["en","fr","es","zh"],x.BT=["en"],x.BW=["en","fr","es","zh"],x.BY=["en"],x.BZ=["en","es","fr","zh"],x.CA=["en","fr"],x.CD=["fr","en","es","zh"],x.CG=["en","fr","es","zh"],x.CH=["de","fr","en"],x.CI=["fr","en"],x.CK=["en","fr","es","zh"],x.CL=["es","en","fr","zh"],x.CM=["fr","en"],x.CN=["zh"],x.CO=["es","en","fr","zh"],x.CR=["es","en","fr","zh"],x.CV=["en","fr","es","zh"],x.CY=["en"],x.CZ=["cs","en","fr","es","zh"],x.DE=["de","en"],x.DJ=["fr","en","es","zh"],x.DK=["da","en"],x.DM=["en","fr","es","zh"],x.DO=["es","en","fr","zh"],x.DZ=["ar","en","fr","es","zh"],x.EC=["es","en","fr","zh"],x.EE=["en","ru","fr","es","zh"],x.EG=["ar","en","fr","es","zh"],x.ER=["en","fr","es","zh"],x.ES=["es","en"],x.ET=["en","fr","es","zh"],x.FI=["fi","en","fr","es","zh"],x.FJ=["en","fr","es","zh"],x.FK=["en","fr","es","zh"],x.FM=["en"],x.FO=["da","en","fr","es","zh"],x.FR=["fr","en"],x.GA=["fr","en","es","zh"],x.GB=["en"],x.GD=["en","fr","es","zh"],x.GE=["en","fr","es","zh"],x.GF=["en","fr","es","zh"],x.GI=["en","fr","es","zh"],x.GL=["da","en","fr","es","zh"],x.GM=["en","fr","es","zh"],x.GN=["fr","en","es","zh"],x.GP=["en","fr","es","zh"],x.GR=["el","en","fr","es","zh"],x.GT=["es","en","fr","zh"],x.GW=["en","fr","es","zh"],x.GY=["en","fr","es","zh"],x.HK=["en","zh"],x.HN=["es","en","fr","zh"],x.HR=["en"],x.HU=["hu","en","fr","es","zh"],x.ID=["id","en"],x.IE=["en","fr","es","zh"],x.IL=["he","en"],x.IN=["en"],x.IS=["en"],x.IT=["it","en"],x.JM=["en","es","fr","zh"],x.JO=["ar","en","fr","es","zh"],x.JP=["ja","en"],x.KE=["en","fr","es","zh"],x.KG=["en","fr","es","zh"],x.KH=["en"],x.KI=["en","fr","es","zh"],x.KM=["fr","en","es","zh"],x.KN=["en","fr","es","zh"],x.KR=["ko","en"],x.KW=["ar","en","fr","es","zh"],x.KY=["en","fr","es","zh"],x.KZ=["en","fr","es","zh"],x.LA=["en"],x.LC=["en","fr","es","zh"],x.LI=["en","fr","es","zh"],x.LK=["en"],x.LS=["en","fr","es","zh"],x.LT=["en","ru","fr","es","zh"],x.LU=["en","de","fr","es","zh"],x.LV=["en","ru","fr","es","zh"],x.MA=["ar","en","fr","es","zh"],x.MC=["fr","en"],x.MD=["en"],x.ME=["en"],x.MG=["en","fr","es","zh"],x.MH=["en","fr","es","zh"],x.MK=["en"],x.ML=["fr","en","es","zh"],x.MN=["en"],x.MQ=["en","fr","es","zh"],x.MR=["en","fr","es","zh"],x.MS=["en","fr","es","zh"],x.MT=["en"],x.MU=["en","fr","es","zh"],x.MV=["en"],x.MW=["en","fr","es","zh"],x.MX=["es","en"],x.MY=["en"],x.MZ=["en","fr","es","zh"],x.NA=["en","fr","es","zh"],x.NC=["en","fr","es","zh"],x.NE=["fr","en","es","zh"],x.NF=["en","fr","es","zh"],x.NG=["en"],x.NI=["es","en","fr","zh"],x.NL=["nl","en"],x.NO=["no","en"],x.NP=["en"],x.NR=["en","fr","es","zh"],x.NU=["en","fr","es","zh"],x.NZ=["en","fr","es","zh"],x.OM=["ar","en","fr","es","zh"],x.PA=["es","en","fr","zh"],x.PE=["es","en","fr","zh"],x.PF=["en","fr","es","zh"],x.PG=["en","fr","es","zh"],x.PH=["en"],x.PL=["pl","en"],x.PM=["en","fr","es","zh"],x.PN=["en","fr","es","zh"],x.PT=["pt","en"],x.PW=["en","fr","es","zh"],x.PY=["es","en"],x.QA=["en","fr","es","zh","ar"],x.RE=["en","fr","es","zh"],x.RO=["en","fr","es","zh"],x.RS=["en","fr","es","zh"],x.RU=["ru","en"],x.RW=["fr","en","es","zh"],x.SA=["ar","en","fr","es","zh"],x.SB=["en","fr","es","zh"],x.SC=["fr","en","es","zh"],x.SE=["sv","en"],x.SG=["en"],x.SH=["en","fr","es","zh"],x.SI=["en","fr","es","zh"],x.SJ=["en","fr","es","zh"],x.SK=["sk","en","fr","es","zh"],x.SL=["en","fr","es","zh"],x.SM=["en","fr","es","zh"],x.SN=["fr","en","es","zh"],x.SO=["en","fr","es","zh"],x.SR=["en","fr","es","zh"],x.ST=["en","fr","es","zh"],x.SV=["es","en","fr","zh"],x.SZ=["en","fr","es","zh"],x.TC=["en","fr","es","zh"],x.TD=["fr","en","es","zh"],x.TG=["fr","en","es","zh"],x.TH=["th","en"],x.TJ=["en","fr","es","zh"],x.TM=["en","fr","es","zh"],x.TN=["ar","en","fr","es","zh"],x.TO=["en"],x.TR=["tr","en"],x.TT=["en","fr","es","zh"],x.TV=["en","fr","es","zh"],x.TW=["zh","en"],x.TZ=["en","fr","es","zh"],x.UA=["en","ru","fr","es","zh"],x.UG=["en","fr","es","zh"],x.US=["en","fr","es","zh"],x.UY=["es","en","fr","zh"],x.VA=["en","fr","es","zh"],x.VC=["en","fr","es","zh"],x.VE=["es","en","fr","zh"],x.VG=["en","fr","es","zh"],x.VN=["en"],x.VU=["en","fr","es","zh"],x.WF=["en","fr","es","zh"],x.WS=["en"],x.YE=["ar","en","fr","es","zh"],x.YT=["en","fr","es","zh"],x.ZA=["en","fr","es","zh"],x.ZM=["en","fr","es","zh"],x.ZW=["en"],{A:"components",ENV:"env",R:"debug",N:"cachebust",_:"client-id",j:"merchant-id",D:"locale",P:"currency",k:"intent",S:"commit",I:"vault",M:"buyer-country",g:"disable-funding",U:"disable-card",L:"locale-country",B:"locale-lang",W:"framework",Y:"integration-date",F:"order-currency",G:"order-intent",H:"order-commit",q:"order-vault"}),Y={K:"capture",V:"authorize",J:"order"},F={Z:"paypal",$:"venmo",X:"credit",rr:"card",nr:"ideal",er:"sepa",tr:"bancontact",ir:"giropay",or:"sofort",EPS:"eps",ur:"mybank",P24:"p24",cr:"zimpler",ar:"wechatpay"},G={sr:"/webapps/hermes/api/auth",J:"/webapps/hermes/api/order",hr:"/webapps/hermes/api/payment",dr:"/graphql"},H="smart_buttons",q={wr:"x-csrf-jwt",vr:"x-source"},K={zr:"CC_PROCESSOR_DECLINED",pr:"INSTRUMENT_DECLINED"},V=/^(EC-)?[A-Z0-9]+$/,J="https://www.paypal.com/checkoutnow/error",Z={},Q="";function $(r){var n,e=r.url,t=r.method,i=void 0===t?"get":t,o=r.json,u=f({},Z,((n={})[q.wr]=Q,n[q.vr]=H,n));return B({url:e,method:i,headers:u,json:o}).then(function(r){var n=r.status,t=r.body;if(Q=r.headers[q.wr],"contingency"===t.ack)throw new Error(t.contingency);if(n>400)throw new Error("Api: "+e+" returned status code: "+n);if("success"!==t.ack)throw new Error("Api: "+e+" returned ack: "+t.ack);return t.data})}function X(){return $({url:G.sr})}var rr=I(function(r){return Z["x-paypal-internal-euat"]=r,X().then(M)});function nr(r){var n=function(){throw new Error("Order could not be patched")};return{orderPatch:function(e){return void 0===e&&(e=[]),function(r,n){return $({method:"post",url:G.J+"/"+r+"/patch",json:{data:{patch:n}}})}(r,e).catch(n)}}}function er(r){if(!r.match(V))throw new Error(r+" does not match pattern for order-id, ec-token or cart-id");return(n='\n        checkout {\n            checkoutSession(token : "'+r+'") {\n                cart {\n                    intent\n                    returnUrl {\n                        href\n                    }\n                    cancelUrl {\n                        href\n                    }\n                    amounts {\n                        total {\n                            currencyCode\n                        }\n                    }\n                }\n            }\n        }\n    ',B({url:G.dr,method:"POST",json:{query:"\n                query {\n                    "+n+"\n                }\n            "}}).then(function(r){var n=r.body,e=(n.errors||[]).filter(function(r){return"ACCOUNT_CANNOT_BE_FETCHED"!==r.message});if(e.length){var t=e[0].message||JSON.stringify(e[0]);throw new Error(t)}return n})).then(function(r){var n=r.data.checkout.checkoutSession.cart,e="sale"===n.intent.toLowerCase()?Y.K:n.intent.toLowerCase(),t=n.amounts&&n.amounts.total.currencyCode,i=n.returnUrl&&n.returnUrl.href,o=n.cancelUrl&&n.cancelUrl.href,f=window.xprops.intent,u=window.xprops.currency;if(e!==f)throw new Error("Expected intent from order api call to be "+f+", got "+e+". Please ensure you are passing "+W.k+"="+e+" to the sdk");if(t&&t!==u)throw new Error("Expected currency from order api call to be "+u+", got "+t+". Please ensure you are passing "+W.P+"="+t+" to the sdk");if(i&&0!==i.indexOf(J))throw new Error('Expected return url to be either blank, or "'+J+'". Return url is forbidden for smart payment button integration.');if(o&&0!==o.indexOf(J))throw new Error('Expected cancel url to be either blank, or "'+J+'". Cancel url is forbidden for smart payment button integration.')});var n}var tr=!1,ir=!1;function or(r,n){if(void 0===r&&(r={}),void 0===n&&(void 0===e&&(e=i()),n=function(r){return void 0===r&&(r=i()),!!function(r){return void 0===r&&(r=i()),/iPhone|iPod|iPad/.test(r)}(r)&&(!!function(r){return void 0===r&&(r=i()),/\bGSA\b/.test(r)}(r)||/.+AppleWebKit(?!.*Safari)/.test(r))}(e)||function(r){return void 0===r&&(r=i()),!!function(r){return void 0===r&&(r=i()),/Android/.test(r)}(r)&&/Version\/[\d.]+/.test(r)&&!o(r)}(e)||o(e)||function(r){return void 0===r&&(r=i()),/FxiOS/i.test(r)}(e)||function(r){return void 0===r&&(r=i()),/EdgiOS/i.test(r)}(e)||function(r){return void 0===r&&(r=i()),-1!==r.indexOf("FBAN")||-1!==r.indexOf("FBAV")}(e)||function(r){return void 0===r&&(r=i()),/QQBrowser/.test(r)}(e)||"undefined"!=typeof process&&process.versions&&process.versions.electron||(t=i(),/Macintosh.*AppleWebKit(?!.*Safari)/i.test(t))||!0===window.navigator.standalone||window.matchMedia("(display-mode: standalone)").matches?"iframe":"popup"),tr)throw new Error("Checkout already rendered");var e,t,u=[E(window),T(window)],c=u[0],a=u[1],s=function(r){return void 0===r&&(r={}),I(function(){return z.try(function(){if(r.createOrder)return r.createOrder();if(window.xprops.createBillingAgreement)return window.xprops.createBillingAgreement().then(function(r){return function(r){return $({method:"post",url:G.hr+"/"+r+"/ectoken"}).then(function(r){return r.token})}(r)});if(window.xprops.createOrder)return window.xprops.createOrder();throw new Error("No mechanism to create order")})})}(r),h=ir&&a?a:c,d=s().then(er),w={};window.xprops.onShippingChange&&(w.onShippingChange=function(r,n){var e=nr(r.orderID);return window.xprops.onShippingChange(r,f({},n,{order:{patch:e.orderPatch}}))});var v,p=window.paypal.Checkout(f({},r,w,{createOrder:s,locale:window.xprops.locale,commit:window.xprops.commit,onError:window.xprops.onError,onApprove:function(r){var n=r.orderID,e=r.payerID,t=r.paymentID,i=r.billingToken,o=function(r,n){var e=I(function(){return r.close().then(function(){return or({createOrder:function(){return z.resolve(n)}},"iframe")}).catch(M).then(function(){return new z(M)})}),t=function(r){if(r&&r.message===K.zr)return e();if(r&&r.message===K.pr)return e();throw new Error("Order could not be captured")},i=I(function(){return function(r){return $({url:G.J+"/"+r})}(n)});return{order:{capture:I(function(){if(window.xprops.intent!==Y.K)throw new Error("Use "+W.k+"="+Y.K+" to use client-side capture");return function(r){return $({method:"post",url:G.J+"/"+r+"/capture"})}(n).catch(t).finally(i.reset)}),authorize:I(function(){return function(r){return $({method:"post",url:G.J+"/"+r+"/authorize"})}(n).catch(t).finally(i.reset)}),patch:nr(n).orderPatch,get:i},restart:e}}(this,n);return window.xprops.onApprove({orderID:n,payerID:e,paymentID:t,billingToken:i},o).catch(function(r){return window.xprops.onError(r)})},onCancel:function(){return z.try(function(){return s()}).then(function(r){return window.xprops.onCancel({orderID:r})}).catch(function(r){return window.xprops.onError(r)})},onAuth:function(r){return rr(r.accessToken)},onClose:function(){tr=!1},nonce:(v="",document.body&&(v=document.body.getAttribute("data-nonce")||""),v)}));return p.renderTo(h,"body",n).then(function(){return d.catch(function(r){return z.all([p.close(),p.onError(r)])})})}function fr(r){if(!window.paypal)throw new Error("PayPal library not loaded");var n,e,t,i;(".paypal-button",void 0===i&&(i=window.document),[].slice.call(i.querySelectorAll(".paypal-button"))).forEach(function(r){var n,e,t=r.getAttribute("data-funding-source"),i=r.getAttribute("data-card");e=function(r){r.preventDefault(),r.stopPropagation(),window.xprops.onClick&&window.xprops.onClick({fundingSource:t,card:i}),or({fundingSource:t}).catch(M)},(n=r).addEventListener("touchstart",M),n.addEventListener("click",e),n.addEventListener("keypress",function(r){if(r.keyCode===g.O)return e(r)})}),X().then(M),window.xprops.getPrerenderDetails().then(function(r){if(r){var n=r.order;or({window:r.win,createOrder:function(){return n},fundingSource:r.fundingSource}).catch(M)}}),r&&r.venmo.eligible&&window.xprops.remember([F.$]),e=(n=[E(window),T(window)])[0],(t=n[1])&&e&&e!==t&&window.paypal.Checkout.canRenderTo(t).then(function(r){ir=r})}e.d(n,"setupButton",function(){return fr})}]);
//# sourceMappingURL=smart-payment-buttons.min.js.map