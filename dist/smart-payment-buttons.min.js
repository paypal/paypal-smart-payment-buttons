window.spb=function(e){var n={};function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=n,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)r.d(t,o,function(n){return e[n]}.bind(null,o));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r(r.s=19)}([function(e,n,r){"use strict";r.d(n,"m",function(){return u}),r.d(n,"c",function(){return c}),r.d(n,"e",function(){return s}),r.d(n,"h",function(){return f}),r.d(n,"d",function(){return h}),r.d(n,"f",function(){return d}),r.d(n,"g",function(){return l}),r.d(n,"k",function(){return p}),r.d(n,"b",function(){return w}),r.d(n,"j",function(){return v}),r.d(n,"a",function(){return m}),r.d(n,"l",function(){return y}),r.d(n,"i",function(){return E});var t,o=r(1),i=r(6);function u(){var e="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})+"_"+function(e){if("function"==typeof btoa)return btoa(e);if("undefined"!=typeof Buffer)return Buffer.from(e,"utf8").toString("base64");throw new Error("Can not find window.btoa or Buffer")}((new Date).toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}function c(){if("undefined"!=typeof window)return window;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("No global found")}function a(e){try{return JSON.stringify(Array.prototype.slice.call(e),function(e,n){return"function"==typeof n?"memoize["+function(e){if(t=t||new i.a,null==e||"object"!=typeof e&&"function"!=typeof e)throw new Error("Invalid object");var n=t.get(e);return n||(n=typeof e+":"+u(),t.set(e,n)),n}(n)+"]":n})}catch(e){throw new Error("Arguments not serializable -- can not be used to memoize")}}function s(e,n){var r=this;void 0===n&&(n={});var t=new i.a;function o(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var u=t.getOrSet(n.thisNamespace?this:e,function(){return{}}),c=a(o),s=n.time;if(u[c]&&s&&Date.now()-u[c].time<s&&delete u[c],u[c])return u[c].value;var f=Date.now(),h=e.apply(this,arguments);return u[c]={time:f,value:h},u[c].value}return o.reset=function(){t.delete(n.thisNamespace?r:e)},n.name&&(o.displayName=n.name+":memoized"),o}function f(e,n){function r(){return o.a.try(e,this,arguments)}return void 0===n&&(n={}),n.name&&(r.displayName=n.name+":promisified"),r}function h(e,n,r){void 0===r&&(r=[]);var t=e.__inline_memoize_cache__=e.__inline_memoize_cache__||{},o=a(r);return t.hasOwnProperty(o)?t[o]:t[o]=n.apply(void 0,r)}function d(){}function l(e){var n=!1;return function(){if(!n)return n=!0,e.apply(this,arguments)}}function p(e){return"string"==typeof e?e:e&&"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e)}function w(e,n){if(!n)return e;if(Object.assign)return Object.assign(e,n);for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e}function v(e,n){var r;return function t(){r=setTimeout(function(){e(),t()},n)}(),{cancel:function(){clearTimeout(r)}}}function m(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function y(e){var n,r;try{n=e()}catch(e){r=e}return{result:n,error:r}}function E(e,n){var r=e.indexOf(n);-1!==r&&e.splice(r,1)}},function(e,n,r){"use strict";function t(e){try{if(!e)return!1;if("undefined"!=typeof Promise&&e instanceof Promise)return!0;if("undefined"!=typeof window&&window.Window&&e instanceof window.Window)return!1;if("undefined"!=typeof window&&window.constructor&&e instanceof window.constructor)return!1;var n={}.toString;if(n){var r=n.call(e);if("[object Window]"===r||"[object global]"===r||"[object DOMWindow]"===r)return!1}if("function"==typeof e.then)return!0}catch(e){return!1}return!1}var o,i=[],u=[],c=0;function a(){if(!c&&o){var e=o;o=null,e.resolve()}}function s(){c+=1}function f(){c-=1,a()}var h=function(){function e(e){var n=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],e){var r,t,o=!1,i=!1,u=!1;s();try{e(function(e){u?n.resolve(e):(o=!0,r=e)},function(e){u?n.reject(e):(i=!0,t=e)})}catch(e){return f(),void this.reject(e)}f(),u=!0,o?this.resolve(r):i&&this.reject(t)}}var n=e.prototype;return n.resolve=function(e){if(this.resolved||this.rejected)return this;if(t(e))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=e,this.dispatch(),this},n.reject=function(e){var n=this;if(this.resolved||this.rejected)return this;if(t(e))throw new Error("Can not reject promise with another promise");if(!e){var r=e&&"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e);e=new Error("Expected reject to be called with Error, got "+r)}return this.rejected=!0,this.error=e,this.errorHandled||setTimeout(function(){n.errorHandled||function(e,n){if(-1===i.indexOf(e)){i.push(e),setTimeout(function(){throw e},1);for(var r=0;r<u.length;r++)u[r](e,n)}}(e,n)},1),this.dispatch(),this},n.asyncReject=function(e){return this.errorHandled=!0,this.reject(e),this},n.dispatch=function(){var n=this,r=this.dispatching,o=this.resolved,i=this.rejected,u=this.handlers;if(!r&&(o||i)){this.dispatching=!0,s();for(var c=function(r){var c=u[r],a=c.onSuccess,s=c.onError,f=c.promise,h=void 0;if(o)try{h=a?a(n.value):n.value}catch(e){return f.reject(e),"continue"}else if(i){if(!s)return f.reject(n.error),"continue";try{h=s(n.error)}catch(e){return f.reject(e),"continue"}}h instanceof e&&(h.resolved||h.rejected)?(h.resolved?f.resolve(h.value):f.reject(h.error),h.errorHandled=!0):t(h)?h instanceof e&&(h.resolved||h.rejected)?h.resolved?f.resolve(h.value):f.reject(h.error):h.then(function(e){f.resolve(e)},function(e){f.reject(e)}):f.resolve(h)},a=0;a<u.length;a++)c(a);u.length=0,this.dispatching=!1,f()}},n.then=function(n,r){if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.then expected a function for success handler");if(r&&"function"!=typeof r&&!r.call)throw new Error("Promise.then expected a function for error handler");var t=new e;return this.handlers.push({promise:t,onSuccess:n,onError:r}),this.errorHandled=!0,this.dispatch(),t},n.catch=function(e){return this.then(void 0,e)},n.finally=function(n){if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.finally expected a function");return this.then(function(r){return e.try(n).then(function(){return r})},function(r){return e.try(n).then(function(){throw r})})},n.timeout=function(e,n){var r=this;if(this.resolved||this.rejected)return this;var t=setTimeout(function(){r.resolved||r.rejected||r.reject(n||new Error("Promise timed out after "+e+"ms"))},e);return this.then(function(e){return clearTimeout(t),e})},n.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},e.resolve=function(n){return n instanceof e?n:t(n)?new e(function(e,r){return n.then(e,r)}):(new e).resolve(n)},e.reject=function(n){return(new e).reject(n)},e.asyncReject=function(n){return(new e).asyncReject(n)},e.all=function(n){var r=new e,o=n.length,i=[];if(!o)return r.resolve(i),r;for(var u=function(u){var c=n[u];if(c instanceof e){if(c.resolved)return i[u]=c.value,o-=1,"continue"}else if(!t(c))return i[u]=c,o-=1,"continue";e.resolve(c).then(function(e){i[u]=e,0==(o-=1)&&r.resolve(i)},function(e){r.reject(e)})},c=0;c<n.length;c++)u(c);return 0===o&&r.resolve(i),r},e.hash=function(n){var r={};return e.all(Object.keys(n).map(function(t){return e.resolve(n[t]).then(function(e){r[t]=e})})).then(function(){return r})},e.map=function(n,r){return e.all(n.map(r))},e.onPossiblyUnhandledException=function(e){return function(e){return u.push(e),{cancel:function(){u.splice(u.indexOf(e),1)}}}(e)},e.try=function(n,r,t){if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.try expected a function");var o;s();try{o=n.apply(r,t||[])}catch(n){return f(),e.reject(n)}return f(),e.resolve(o)},e.delay=function(n){return new e(function(e){setTimeout(e,n)})},e.isPromise=function(n){return!!(n&&n instanceof e)||t(n)},e.flush=function(){return n=o=o||new e,a(),n;var n},e}();r.d(n,"a",function(){return h})},function(e,n,r){"use strict";var t=r(7);r.d(n,"supportsPopups",function(){return t.b});var o=r(9);r.d(n,"onClick",function(){return o.b}),r.d(n,"querySelectorAll",function(){return o.c}),r(11),r(12),r(8);var i=r(0);r.d(n,"memoize",function(){return i.e}),r.d(n,"noop",function(){return i.f});var u=r(13);r.d(n,"request",function(){return u.a}),r(14),r(15),r(16),r(17)},function(e,n,r){"use strict";var t=r(18);r.d(n,"getParent",function(){return t.a}),r.d(n,"getTop",function(){return t.b}),r.d(n,"isWindow",function(){return t.c}),r.d(n,"isWindowClosed",function(){return t.d}),r.d(n,"linkFrameWindow",function(){return t.e}),r(10),r(4)},function(e,n,r){"use strict";r.d(n,"a",function(){return t}),r.d(n,"b",function(){return o});var t={MOCK:"mock:",FILE:"file:",ABOUT:"about:"},o="*"},function(e,n,r){"use strict";function t(){return(t=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(this,arguments)}r.d(n,"a",function(){return t})},function(e,n,r){"use strict";var t={};r.r(t),r.d(t,"WeakMap",function(){return a});var o=r(3);function i(e,n){for(var r=0;r<e.length;r++)try{if(e[r]===n)return r}catch(e){}return-1}var u=Object.defineProperty,c=Date.now()%1e9,a=function(){function e(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,c+=1,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__"+c,function(){if("undefined"==typeof WeakMap)return!1;if(void 0===Object.freeze)return!1;try{var e=new WeakMap,n={};return Object.freeze(n),e.set(n,"__testvalue__"),"__testvalue__"===e.get(n)}catch(e){return!1}}())try{this.weakmap=new WeakMap}catch(e){}this.keys=[],this.values=[]}var n=e.prototype;return n._cleanupClosedWindows=function(){for(var e=this.weakmap,n=this.keys,r=0;r<n.length;r++){var t=n[r];if(Object(o.isWindow)(t)&&Object(o.isWindowClosed)(t)){if(e)try{e.delete(t)}catch(e){}n.splice(r,1),this.values.splice(r,1),r-=1}}},n.isSafeToReadWrite=function(e){if(Object(o.isWindow)(e))return!1;try{e&&e.self,e&&e[this.name]}catch(e){return!1}return!0},n.set=function(e,n){if(!e)throw new Error("WeakMap expected key");var r=this.weakmap;if(r)try{r.set(e,n)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var t=this.name,o=e[t];o&&o[0]===e?o[1]=n:u(e,t,{value:[e,n],writable:!0})}else{this._cleanupClosedWindows();var c=this.keys,a=this.values,s=i(c,e);-1===s?(c.push(e),a.push(n)):a[s]=n}},n.get=function(e){if(!e)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{if(n.has(e))return n.get(e)}catch(e){delete this.weakmap}if(!this.isSafeToReadWrite(e)){this._cleanupClosedWindows();var r=i(this.keys,e);if(-1===r)return;return this.values[r]}var t=e[this.name];if(t&&t[0]===e)return t[1]},n.delete=function(e){if(!e)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{n.delete(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var r=e[this.name];r&&r[0]===e&&(r[0]=r[1]=void 0)}else{this._cleanupClosedWindows();var t=this.keys,o=i(t,e);-1!==o&&(t.splice(o,1),this.values.splice(o,1))}},n.has=function(e){if(!e)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{if(n.has(e))return!0}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var r=e[this.name];return!(!r||r[0]!==e)}return this._cleanupClosedWindows(),-1!==i(this.keys,e)},n.getOrSet=function(e,n){if(this.has(e))return this.get(e);var r=n();return this.set(e,r),r},e}();r.d(n,"a",function(){return a})},function(e,n,r){"use strict";function t(){return window.navigator.mockUserAgent||window.navigator.userAgent}function o(){return!!t().match(/Android|webOS|iPhone|iPad|iPod|bada|Symbian|Palm|CriOS|BlackBerry|IEMobile|WindowsMobile|Opera Mini/i)}function i(e){return void 0===e&&(e=t()),e.indexOf("Opera Mini")>-1}function u(e){return void 0===e&&(e=t()),!(function(e){return void 0===e&&(e=t()),!!function(e){return void 0===e&&(e=t()),/iPhone|iPod|iPad/.test(e)}(e)&&(!!function(e){return void 0===e&&(e=t()),/\bGSA\b/.test(e)}(e)||/.+AppleWebKit(?!.*Safari)/.test(e))}(e)||function(e){return void 0===e&&(e=t()),!!function(e){return void 0===e&&(e=t()),/Android/.test(e)}(e)&&/Version\/[\d.]+/.test(e)&&!i(e)}(e)||i(e)||function(e){return void 0===e&&(e=t()),/FxiOS/i.test(e)}(e)||function(e){return void 0===e&&(e=t()),/EdgiOS/i.test(e)}(e)||function(e){return void 0===e&&(e=t()),-1!==e.indexOf("FBAN")||-1!==e.indexOf("FBAV")}(e)||function(e){return void 0===e&&(e=t()),/QQBrowser/.test(e)}(e)||"undefined"!=typeof process&&process.versions&&process.versions.electron||(n=t(),/Macintosh.*AppleWebKit(?!.*Safari)/i.test(n))||!0===window.navigator.standalone||window.matchMedia("(display-mode: standalone)").matches);var n}r.d(n,"a",function(){return o}),r.d(n,"b",function(){return u})},function(e,n,r){"use strict";r.d(n,"a",function(){return i});var t=r(0),o=r(9);function i(e){var n=e.name,r=e.version,u=void 0===r?"latest":r,c=e.lifetime,a=void 0===c?3e5:c;return Object(t.d)(i,function(){var e,r="__"+n+"_"+u+"_storage__";function i(n){var i,u=Object(o.a)();if(e&&(i=e),!i&&u){var c=window.localStorage.getItem(r);c&&(i=JSON.parse(c))}i||(i=Object(t.c)()[r]),i||(i={id:Object(t.m)()}),i.id||(i.id=Object(t.m)()),e=i;var a=n(i);return u?window.localStorage.setItem(r,JSON.stringify(i)):Object(t.c)()[r]=i,e=null,a}function c(e){return i(function(n){var r=n.__session__,o=Date.now();return r&&o-r.created>a&&(r=null),r||(r={guid:Object(t.m)(),created:o}),n.__session__=r,e(r)})}return{getState:i,getID:function(){return i(function(e){return e.id})},getSessionState:function(e){return c(function(n){return n.state=n.state||{},e(n.state)})},getSessionID:function(){return c(function(e){return e.guid})}}},[{name:n,version:u,lifetime:a}])}},function(e,n,r){"use strict";r(5),r(1),r(3),r(6);var t=r(0),o=(r(7),{ENTER:13});function i(e,n){return void 0===n&&(n=window.document),Array.prototype.slice.call(n.querySelectorAll(e))}function u(e,n){e.addEventListener("touchstart",t.f),e.addEventListener("click",n),e.addEventListener("keypress",function(e){if(e.keyCode===o.ENTER)return n(e)})}function c(){return Object(t.d)(c,function(){try{if("undefined"==typeof window)return!1;if(window.localStorage){var e=Math.random().toString();window.localStorage.setItem("__test__localStorage__",e);var n=window.localStorage.getItem("__test__localStorage__");if(window.localStorage.removeItem("__test__localStorage__"),e===n)return!0}}catch(e){}return!1})}r.d(n,"c",function(){return i}),r.d(n,"b",function(){return u}),r.d(n,"a",function(){return c}),Object.create(Error.prototype)},function(e,n){},function(e,n,r){"use strict";r(0),r(8)},function(e,n,r){"use strict";r(0)},function(e,n,r){"use strict";r.d(n,"a",function(){return u});var t=r(1),o={CONTENT_TYPE:"content-type",ACCEPT:"accept"},i=[];function u(e){var n=e.url,r=e.method,u=void 0===r?"get":r,c=e.headers,a=void 0===c?{}:c,s=e.json,f=e.data,h=e.body,d=e.win,l=void 0===d?window:d,p=e.timeout,w=void 0===p?0:p;return new t.a(function(e,r){if(s&&f||s&&h||f&&s)throw new Error("Only options.json or options.data or options.body should be passed");for(var t={},c=0,d=Object.keys(a);c<d.length;c++){var p=d[c];t[p.toLowerCase()]=a[p]}s?t[o.CONTENT_TYPE]=t[o.CONTENT_TYPE]||"application/json":(f||h)&&(t[o.CONTENT_TYPE]=t[o.CONTENT_TYPE]||"application/x-www-form-urlencoded; charset=utf-8"),t[o.ACCEPT]=t[o.ACCEPT]||"application/json";for(var v=0;v<i.length;v++)for(var m=(0,i[v])(),y=0,E=Object.keys(m);y<E.length;y++){var z=E[y];t[z.toLowerCase()]=m[z]}var O=new l.XMLHttpRequest;for(var g in O.addEventListener("load",function(){var t=function(e){void 0===e&&(e="");for(var n={},r=0,t=e.trim().split("\n");r<t.length;r++){var o=t[r].split(":"),i=o[0],u=o.slice(1);n[i.toLowerCase()]=u.join(":").trim()}return n}(this.getAllResponseHeaders());if(!this.status)return r(new Error("Request to "+u.toLowerCase()+" "+n+" failed: no response status code."));var o=t["content-type"],i=o&&(0===o.indexOf("application/json")||0===o.indexOf("text/json")),c=this.responseText;try{c=JSON.parse(c)}catch(e){if(i)return r(new Error("Invalid json: "+this.responseText+"."))}var a={status:this.status,headers:t,body:c};return e(a)},!1),O.addEventListener("error",function(e){r(new Error("Request to "+u.toLowerCase()+" "+n+" failed: "+e.toString()+"."))},!1),O.open(u,n,!0),t)t.hasOwnProperty(g)&&O.setRequestHeader(g,t[g]);s?h=JSON.stringify(s):f&&(h=Object.keys(f).map(function(e){return encodeURIComponent(e)+"="+(f?encodeURIComponent(f[e]):"")}).join("&")),O.timeout=w,O.ontimeout=function(){r(new Error("Request to "+u.toLowerCase()+" "+n+" has timed out"))},O.send(h)})}},function(e,n){},function(e,n,r){"use strict";r(0)},function(e,n,r){},function(e,n,r){"use strict";r(1),r(0)},function(e,n,r){"use strict";var t=r(4);r.d(n,"a",function(){return u}),r.d(n,"b",function(){return h}),r.d(n,"d",function(){return p}),r.d(n,"e",function(){return w}),r.d(n,"c",function(){return v});var o="Call was rejected by callee.\r\n";function i(e){return void 0===e&&(e=window),e.location.protocol===t.a.ABOUT}function u(e){if(e)try{if(e.parent&&e.parent!==e)return e.parent}catch(e){}}function c(e){try{return e&&e.location&&e.location.href,!0}catch(e){}return!1}function a(e){var n=(e=e||window).location;if(!n)throw new Error("Can not read window location");var r=n.protocol;if(!r)throw new Error("Can not read window protocol");if(r===t.a.FILE)return t.a.FILE+"//";if(r===t.a.ABOUT){var o=u(e);return o&&c(o)?a(o):t.a.ABOUT+"//"}var i=n.host;if(!i)throw new Error("Can not read window host");return r+"//"+i}function s(e){var n=a(e=e||window);return n&&e.mockDomain&&0===e.mockDomain.indexOf(t.a.MOCK)?e.mockDomain:n}function f(e,n){if(!e||!n)return!1;var r=u(n);return r?r===e:-1!==function(e){var n=[];try{for(;e.parent!==e;)n.push(e.parent),e=e.parent}catch(e){}return n}(n).indexOf(e)}function h(e){if(e){try{if(e.top)return e.top}catch(e){}if(u(e)===e)return e;try{if(f(window,e)&&window.top)return window.top}catch(e){}try{if(f(e,window)&&window.top)return window.top}catch(e){}for(var n=0,r=function e(n){for(var r=[],t=0,o=function(e){var n,r,t=[];try{n=e.frames}catch(r){n=e}try{r=n.length}catch(e){}if(0===r)return t;if(r){for(var o=0;o<r;o++){var i=void 0;try{i=n[o]}catch(e){continue}t.push(i)}return t}for(var u=0;u<100;u++){var c=void 0;try{c=n[u]}catch(e){return t}if(!c)return t;t.push(c)}return t}(n);t<o.length;t++){var i=o[t];r.push(i);for(var u=0,c=e(i);u<c.length;u++){var a=c[u];r.push(a)}}return r}(e);n<r.length;n++){var t=r[n];try{if(t.top)return t.top}catch(e){}if(u(t)===t)return t}}}var d=[],l=[];function p(e,n){void 0===n&&(n=!0);try{if(e===window)return!1}catch(e){return!0}try{if(!e)return!0}catch(e){return!0}try{if(e.closed)return!0}catch(e){return!e||e.message!==o}if(n&&function(e){if(!function(e){try{if(e===window)return!0}catch(e){}try{var n=Object.getOwnPropertyDescriptor(e,"location");if(n&&!1===n.enumerable)return!1}catch(e){}try{if(i(e)&&c(e))return!0}catch(e){}try{if(a(e)===a(window))return!0}catch(e){}return!1}(e))return!1;try{if(e===window)return!0;if(i(e)&&c(e))return!0;if(s(window)===s(e))return!0}catch(e){}return!1}(e))try{if(e.mockclosed)return!0}catch(e){}try{if(!e.parent||!e.top)return!0}catch(e){}var r=function(e,n){for(var r=0;r<e.length;r++)try{if(e[r]===n)return r}catch(e){}return-1}(d,e);if(-1!==r){var t=l[r];if(t&&function(e){if(!e.contentWindow)return!0;if(!e.parentNode)return!0;var n=e.ownerDocument;return!(!n||!n.documentElement||n.documentElement.contains(e))}(t))return!0}return!1}function w(e){if(function(){for(var e=0;e<d.length;e++){var n=!1;try{n=d[e].closed}catch(e){}n&&(l.splice(e,1),d.splice(e,1))}}(),e&&e.contentWindow)try{d.push(e.contentWindow),l.push(e)}catch(e){}}function v(e){try{if(e===window)return!0}catch(e){if(e&&e.message===o)return!0}try{if("[object Window]"===Object.prototype.toString.call(e))return!0}catch(e){if(e&&e.message===o)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(e){if(e&&e.message===o)return!0}try{if(e&&e.self===e)return!0}catch(e){if(e&&e.message===o)return!0}try{if(e&&e.parent===e)return!0}catch(e){if(e&&e.message===o)return!0}try{if(e&&e.top===e)return!0}catch(e){if(e&&e.message===o)return!0}try{e&&e.__cross_domain_utils_window_check__}catch(e){return!0}return!1}},function(e,n,r){"use strict";r.r(n);var t,o=r(2),i=r(5),u=r(1),c=((t={}).AD=["en","fr","es","zh"],t.AE=["en","fr","es","zh","ar"],t.AG=["en","fr","es","zh"],t.AI=["en","fr","es","zh"],t.AL=["en"],t.AM=["en","fr","es","zh"],t.AN=["en","fr","es","zh"],t.AO=["en","fr","es","zh"],t.AR=["es","en"],t.AT=["de","en"],t.AU=["en"],t.AW=["en","fr","es","zh"],t.AZ=["en","fr","es","zh"],t.BA=["en"],t.BB=["en","fr","es","zh"],t.BE=["en","nl","fr"],t.BF=["fr","en","es","zh"],t.BG=["en"],t.BH=["ar","en","fr","es","zh"],t.BI=["fr","en","es","zh"],t.BJ=["fr","en","es","zh"],t.BM=["en","fr","es","zh"],t.BN=["en"],t.BO=["es","en","fr","zh"],t.BR=["pt","en"],t.BS=["en","fr","es","zh"],t.BT=["en"],t.BW=["en","fr","es","zh"],t.BY=["en"],t.BZ=["en","es","fr","zh"],t.CA=["en","fr"],t.CD=["fr","en","es","zh"],t.CG=["en","fr","es","zh"],t.CH=["de","fr","en"],t.CI=["fr","en"],t.CK=["en","fr","es","zh"],t.CL=["es","en","fr","zh"],t.CM=["fr","en"],t.CN=["zh"],t.CO=["es","en","fr","zh"],t.CR=["es","en","fr","zh"],t.CV=["en","fr","es","zh"],t.CY=["en"],t.CZ=["cs","en","fr","es","zh"],t.DE=["de","en"],t.DJ=["fr","en","es","zh"],t.DK=["da","en"],t.DM=["en","fr","es","zh"],t.DO=["es","en","fr","zh"],t.DZ=["ar","en","fr","es","zh"],t.EC=["es","en","fr","zh"],t.EE=["en","ru","fr","es","zh"],t.EG=["ar","en","fr","es","zh"],t.ER=["en","fr","es","zh"],t.ES=["es","en"],t.ET=["en","fr","es","zh"],t.FI=["fi","en","fr","es","zh"],t.FJ=["en","fr","es","zh"],t.FK=["en","fr","es","zh"],t.FM=["en"],t.FO=["da","en","fr","es","zh"],t.FR=["fr","en"],t.GA=["fr","en","es","zh"],t.GB=["en"],t.GD=["en","fr","es","zh"],t.GE=["en","fr","es","zh"],t.GF=["en","fr","es","zh"],t.GI=["en","fr","es","zh"],t.GL=["da","en","fr","es","zh"],t.GM=["en","fr","es","zh"],t.GN=["fr","en","es","zh"],t.GP=["en","fr","es","zh"],t.GR=["el","en","fr","es","zh"],t.GT=["es","en","fr","zh"],t.GW=["en","fr","es","zh"],t.GY=["en","fr","es","zh"],t.HK=["en","zh"],t.HN=["es","en","fr","zh"],t.HR=["en"],t.HU=["hu","en","fr","es","zh"],t.ID=["id","en"],t.IE=["en","fr","es","zh"],t.IL=["he","en"],t.IN=["en"],t.IS=["en"],t.IT=["it","en"],t.JM=["en","es","fr","zh"],t.JO=["ar","en","fr","es","zh"],t.JP=["ja","en"],t.KE=["en","fr","es","zh"],t.KG=["en","fr","es","zh"],t.KH=["en"],t.KI=["en","fr","es","zh"],t.KM=["fr","en","es","zh"],t.KN=["en","fr","es","zh"],t.KR=["ko","en"],t.KW=["ar","en","fr","es","zh"],t.KY=["en","fr","es","zh"],t.KZ=["en","fr","es","zh"],t.LA=["en"],t.LC=["en","fr","es","zh"],t.LI=["en","fr","es","zh"],t.LK=["en"],t.LS=["en","fr","es","zh"],t.LT=["en","ru","fr","es","zh"],t.LU=["en","de","fr","es","zh"],t.LV=["en","ru","fr","es","zh"],t.MA=["ar","en","fr","es","zh"],t.MC=["fr","en"],t.MD=["en"],t.ME=["en"],t.MG=["en","fr","es","zh"],t.MH=["en","fr","es","zh"],t.MK=["en"],t.ML=["fr","en","es","zh"],t.MN=["en"],t.MQ=["en","fr","es","zh"],t.MR=["en","fr","es","zh"],t.MS=["en","fr","es","zh"],t.MT=["en"],t.MU=["en","fr","es","zh"],t.MV=["en"],t.MW=["en","fr","es","zh"],t.MX=["es","en"],t.MY=["en"],t.MZ=["en","fr","es","zh"],t.NA=["en","fr","es","zh"],t.NC=["en","fr","es","zh"],t.NE=["fr","en","es","zh"],t.NF=["en","fr","es","zh"],t.NG=["en"],t.NI=["es","en","fr","zh"],t.NL=["nl","en"],t.NO=["no","en"],t.NP=["en"],t.NR=["en","fr","es","zh"],t.NU=["en","fr","es","zh"],t.NZ=["en","fr","es","zh"],t.OM=["ar","en","fr","es","zh"],t.PA=["es","en","fr","zh"],t.PE=["es","en","fr","zh"],t.PF=["en","fr","es","zh"],t.PG=["en","fr","es","zh"],t.PH=["en"],t.PL=["pl","en"],t.PM=["en","fr","es","zh"],t.PN=["en","fr","es","zh"],t.PT=["pt","en"],t.PW=["en","fr","es","zh"],t.PY=["es","en"],t.QA=["en","fr","es","zh","ar"],t.RE=["en","fr","es","zh"],t.RO=["en","fr","es","zh"],t.RS=["en","fr","es","zh"],t.RU=["ru","en"],t.RW=["fr","en","es","zh"],t.SA=["ar","en","fr","es","zh"],t.SB=["en","fr","es","zh"],t.SC=["fr","en","es","zh"],t.SE=["sv","en"],t.SG=["en"],t.SH=["en","fr","es","zh"],t.SI=["en","fr","es","zh"],t.SJ=["en","fr","es","zh"],t.SK=["sk","en","fr","es","zh"],t.SL=["en","fr","es","zh"],t.SM=["en","fr","es","zh"],t.SN=["fr","en","es","zh"],t.SO=["en","fr","es","zh"],t.SR=["en","fr","es","zh"],t.ST=["en","fr","es","zh"],t.SV=["es","en","fr","zh"],t.SZ=["en","fr","es","zh"],t.TC=["en","fr","es","zh"],t.TD=["fr","en","es","zh"],t.TG=["fr","en","es","zh"],t.TH=["th","en"],t.TJ=["en","fr","es","zh"],t.TM=["en","fr","es","zh"],t.TN=["ar","en","fr","es","zh"],t.TO=["en"],t.TR=["tr","en"],t.TT=["en","fr","es","zh"],t.TV=["en","fr","es","zh"],t.TW=["zh","en"],t.TZ=["en","fr","es","zh"],t.UA=["en","ru","fr","es","zh"],t.UG=["en","fr","es","zh"],t.US=["en","fr","es","zh"],t.UY=["es","en","fr","zh"],t.VA=["en","fr","es","zh"],t.VC=["en","fr","es","zh"],t.VE=["es","en","fr","zh"],t.VG=["en","fr","es","zh"],t.VN=["en"],t.VU=["en","fr","es","zh"],t.WF=["en","fr","es","zh"],t.WS=["en"],t.YE=["ar","en","fr","es","zh"],t.YT=["en","fr","es","zh"],t.ZA=["en","fr","es","zh"],t.ZM=["en","fr","es","zh"],t.ZW=["en"],{COMPONENTS:"components",ENV:"env",DEBUG:"debug",CACHEBUST:"cachebust",CLIENT_ID:"client-id",MERCHANT_ID:"merchant-id",LOCALE:"locale",CURRENCY:"currency",INTENT:"intent",COMMIT:"commit",VAULT:"vault",BUYER_COUNTRY:"buyer-country",DISABLE_FUNDING:"disable-funding",DISABLE_CARD:"disable-card",LOCALE_COUNTRY:"locale-country",LOCALE_LANG:"locale-lang",ORDER_CURRENCY:"order-currency",ORDER_INTENT:"order-intent",ORDER_COMMIT:"order-commit",ORDER_VAULT:"order-vault"}),a={CAPTURE:"capture",AUTHORIZE:"authorize",ORDER:"order"},s=(a.CAPTURE,r(3)),f={AUTH:"/webapps/hermes/api/auth",ORDER:"/webapps/hermes/api/order",PAYMENT:"/webapps/hermes/api/payment",GRAPHQL:"/graphql"},h="smart_buttons",d={CSRF_TOKEN:"x-csrf-jwt",SOURCE:"x-source"},l={CC_PROCESSOR_DECLINED:"CC_PROCESSOR_DECLINED",INSTRUMENT_DECLINED:"INSTRUMENT_DECLINED"},p=/^(EC-)?[A-Z0-9]+$/,w="https://www.paypal.com/checkoutnow/error",v={},m="";function y(e){var n,r=e.url,t=e.method,u=void 0===t?"get":t,c=e.json,a=Object(i.a)({},v,((n={})[d.CSRF_TOKEN]=m,n[d.SOURCE]=h,n));return Object(o.request)({url:r,method:u,headers:a,json:c}).then(function(e){var n=e.status,t=e.headers,o=e.body;if(m=t[d.CSRF_TOKEN],"contingency"===o.ack)throw new Error(o.contingency);if(n>400)throw new Error("Api: "+r+" returned status code: "+n);if("success"!==o.ack)throw new Error("Api: "+r+" returned ack: "+o.ack);return o.data})}function E(){return y({url:f.AUTH})}var z=Object(o.memoize)(function(e){return v["x-paypal-internal-euat"]=e,E().then(o.noop)});function O(e){if(!e.match(p))throw new Error(e+" does not match pattern for order-id, ec-token or cart-id");return(n='\n        checkout {\n            checkoutSession(token : "'+e+'") {\n                cart {\n                    intent\n                    returnUrl {\n                        href\n                    }\n                    cancelUrl {\n                        href\n                    }\n                    amounts {\n                        total {\n                            currencyCode\n                        }\n                    }\n                }\n            }\n        }\n    ',Object(o.request)({url:f.GRAPHQL,method:"POST",json:{query:"\n                query {\n                    "+n+"\n                }\n            "}}).then(function(e){var n=e.body,r=(n.errors||[]).filter(function(e){return"ACCOUNT_CANNOT_BE_FETCHED"!==e.message});if(r.length){var t=r[0].message||JSON.stringify(r[0]);throw new Error(t)}return n})).then(function(e){var n=e.data.checkout.checkoutSession.cart,r="sale"===n.intent.toLowerCase()?a.CAPTURE:n.intent.toLowerCase(),t=n.amounts&&n.amounts.total.currencyCode,o=n.returnUrl&&n.returnUrl.href,i=n.cancelUrl&&n.cancelUrl.href,u=window.xprops.intent,s=window.xprops.currency;if(r!==u)throw new Error("Expected intent from order api call to be "+u+", got "+r+". Please ensure you are passing "+c.INTENT+"="+r+" to the sdk");if(t&&t!==s)throw new Error("Expected currency from order api call to be "+s+", got "+t+". Please ensure you are passing "+c.CURRENCY+"="+t+" to the sdk");if(o&&0!==o.indexOf(w))throw new Error('Expected return url to be either blank, or "'+w+'". Return url is forbidden for smart payment button integration.');if(i&&0!==i.indexOf(w))throw new Error('Expected cancel url to be either blank, or "'+w+'". Cancel url is forbidden for smart payment button integration.')});var n}var g=!1,b=!1;function C(e,n){if(void 0===e&&(e={}),void 0===n&&(n=Object(o.supportsPopups)()?"popup":"iframe"),g)throw new Error("Checkout already rendered");var r=[Object(s.getParent)(window),Object(s.getTop)(window)],t=r[0],h=r[1],d=function(e){return void 0===e&&(e={}),Object(o.memoize)(function(){return u.a.try(function(){if(e.createOrder)return e.createOrder();if(window.xprops.createBillingAgreement)return window.xprops.createBillingAgreement().then(function(e){return function(e){return y({method:"post",url:f.PAYMENT+"/"+e+"/ectoken"}).then(function(e){return e.token})}(e)});if(window.xprops.createOrder)return window.xprops.createOrder();throw new Error("No mechanism to create order")})})}(e),p=b&&h?h:t,w=d().then(O),v={};window.xprops.onShippingChange&&(v.onShippingChange=function(e,n){return window.xprops.onShippingChange(e,function(e,n,r){var t=function(){throw new Error("Order could not be patched")};return Object(i.a)({},r,{order:{patch:function(e){return void 0===e&&(e=[]),function(e,n){return y({method:"post",url:f.ORDER+"/"+e+"/patch",json:{data:{patch:n}}})}(n,e).catch(t)}}})}(0,e.orderID,n))});var m,E=window.paypal.Checkout(Object(i.a)({},e,v,{createOrder:d,locale:window.xprops.locale,commit:window.xprops.commit,onError:window.xprops.onError,onApprove:function(e){var n=e.orderID,r=e.payerID,t=e.paymentID,i=e.billingToken,s=function(e,n){var r=Object(o.memoize)(function(){return e.close().then(function(){return C({createOrder:function(){return u.a.resolve(n)}},"iframe")}).catch(o.noop).then(function(){return new u.a(o.noop)})}),t=function(e){if(e&&e.message===l.CC_PROCESSOR_DECLINED)return r();if(e&&e.message===l.INSTRUMENT_DECLINED)return r();throw new Error("Order could not be captured")},i=Object(o.memoize)(function(){return function(e){return y({url:f.ORDER+"/"+e})}(n)});return{order:{capture:Object(o.memoize)(function(){if(window.xprops.intent!==a.CAPTURE)throw new Error("Use "+c.INTENT+"="+a.CAPTURE+" to use client-side capture");return function(e){return y({method:"post",url:f.ORDER+"/"+e+"/capture"})}(n).catch(t).finally(i.reset)}),authorize:Object(o.memoize)(function(){return function(e){return y({method:"post",url:f.ORDER+"/"+e+"/authorize"})}(n).catch(t).finally(i.reset)}),get:i},restart:r}}(this,n);return window.xprops.onApprove({orderID:n,payerID:r,paymentID:t,billingToken:i},s).catch(function(e){return window.xprops.onError(e)})},onCancel:function(){return u.a.try(function(){return d()}).then(function(e){return window.xprops.onCancel({orderID:e})}).catch(function(e){return window.xprops.onError(e)})},onAuth:function(e){var n=e.accessToken;return z(n)},onClose:function(){g=!1},nonce:(m="",document.body&&(m=document.body.getAttribute("data-nonce")||""),m)}));return E.renderTo(p,"body",n).then(function(){return w.catch(function(e){return u.a.all([E.close(),E.onError(e)])})})}function T(){if(!window.paypal)throw new Error("PayPal library not loaded");var e,n,r;Object(o.querySelectorAll)(".paypal-button").forEach(function(e){var n=e.getAttribute("data-funding-source"),r=e.getAttribute("data-card");Object(o.onClick)(e,function(e){e.preventDefault(),e.stopPropagation(),window.xprops.onClick&&window.xprops.onClick({fundingSource:n,card:r}),C({fundingSource:n}).catch(o.noop)})}),E().then(o.noop),window.xprops.getPrerenderDetails().then(function(e){if(e){var n=e.win,r=e.order;C({window:n,createOrder:function(){return r},fundingSource:e.fundingSource}).catch(o.noop)}}),n=(e=[Object(s.getParent)(window),Object(s.getTop)(window)])[0],(r=e[1])&&n&&n!==r&&window.paypal.Checkout.canRenderTo(r).then(function(e){b=e})}r.d(n,"setupButton",function(){return T})}]);
//# sourceMappingURL=smart-payment-buttons.min.js.map