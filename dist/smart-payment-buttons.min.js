window.spb=function(n){var r={};function e(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return n[t].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=n,e.c=r,e.d=function(n,r,t){e.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:t})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,r){if(1&r&&(n=e(n)),8&r)return n;if(4&r&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(e.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&r&&"string"!=typeof n)for(var i in n)e.d(t,i,function(r){return n[r]}.bind(null,i));return t},e.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(r,"a",r),r},e.o=function(n,r){return{}.hasOwnProperty.call(n,r)},e.p="",e(e.s=0)}([function(n,r,e){"use strict";e.r(r);var t={};function i(){return window.navigator.mockUserAgent||window.navigator.userAgent}function o(n){return void 0===n&&(n=i()),n.indexOf("Opera Mini")>-1}function f(){return(f=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var t in e)({}).hasOwnProperty.call(e,t)&&(n[t]=e[t])}return n}).apply(this,arguments)}function u(n){try{if(!n)return!1;if("undefined"!=typeof Promise&&n instanceof Promise)return!0;if("undefined"!=typeof window&&window.Window&&n instanceof window.Window)return!1;if("undefined"!=typeof window&&window.constructor&&n instanceof window.constructor)return!1;var r={}.toString;if(r){var e=r.call(n);if("[object Window]"===e||"[object global]"===e||"[object DOMWindow]"===e)return!1}if("function"==typeof n.then)return!0}catch(n){return!1}return!1}e.r(t),e.d(t,"WeakMap",function(){return g});var c,a=[],s=[],h=0;function d(){if(!h&&c){var n=c;c=null,n.resolve()}}function w(){h+=1}function v(){h-=1,d()}var z=function(){function n(n){var r=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],n){var e,t,i=!1,o=!1,f=!1;w();try{n(function(n){f?r.resolve(n):(i=!0,e=n)},function(n){f?r.reject(n):(o=!0,t=n)})}catch(n){return v(),void this.reject(n)}v(),f=!0,i?this.resolve(e):o&&this.reject(t)}}var r=n.prototype;return r.resolve=function(n){if(this.resolved||this.rejected)return this;if(u(n))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=n,this.dispatch(),this},r.reject=function(n){var r=this;if(this.resolved||this.rejected)return this;if(u(n))throw new Error("Can not reject promise with another promise");if(!n){var e=n&&"function"==typeof n.toString?n.toString():{}.toString.call(n);n=new Error("Expected reject to be called with Error, got "+e)}return this.rejected=!0,this.error=n,this.errorHandled||setTimeout(function(){r.errorHandled||function(n,r){if(-1===a.indexOf(n)){a.push(n),setTimeout(function(){throw n},1);for(var e=0;e<s.length;e++)s[e](n,r)}}(n,r)},1),this.dispatch(),this},r.asyncReject=function(n){return this.errorHandled=!0,this.reject(n),this},r.dispatch=function(){var r=this,e=this.resolved,t=this.rejected,i=this.handlers;if(!this.dispatching&&(e||t)){this.dispatching=!0,w();for(var o=function(o){var f=i[o],c=f.onSuccess,a=f.onError,s=f.promise,h=void 0;if(e)try{h=c?c(r.value):r.value}catch(n){return s.reject(n),"continue"}else if(t){if(!a)return s.reject(r.error),"continue";try{h=a(r.error)}catch(n){return s.reject(n),"continue"}}h instanceof n&&(h.resolved||h.rejected)?(h.resolved?s.resolve(h.value):s.reject(h.error),h.errorHandled=!0):u(h)?h instanceof n&&(h.resolved||h.rejected)?h.resolved?s.resolve(h.value):s.reject(h.error):h.then(function(n){s.resolve(n)},function(n){s.reject(n)}):s.resolve(h)},f=0;f<i.length;f++)o(f);i.length=0,this.dispatching=!1,v()}},r.then=function(r,e){if(r&&"function"!=typeof r&&!r.call)throw new Error("Promise.then expected a function for success handler");if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.then expected a function for error handler");var t=new n;return this.handlers.push({promise:t,onSuccess:r,onError:e}),this.errorHandled=!0,this.dispatch(),t},r.catch=function(n){return this.then(void 0,n)},r.finally=function(r){if(r&&"function"!=typeof r&&!r.call)throw new Error("Promise.finally expected a function");return this.then(function(e){return n.try(r).then(function(){return e})},function(e){return n.try(r).then(function(){throw e})})},r.timeout=function(n,r){var e=this;if(this.resolved||this.rejected)return this;var t=setTimeout(function(){e.resolved||e.rejected||e.reject(r||new Error("Promise timed out after "+n+"ms"))},n);return this.then(function(n){return clearTimeout(t),n})},r.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},n.resolve=function(r){return r instanceof n?r:u(r)?new n(function(n,e){return r.then(n,e)}):(new n).resolve(r)},n.reject=function(r){return(new n).reject(r)},n.asyncReject=function(r){return(new n).asyncReject(r)},n.all=function(r){var e=new n,t=r.length,i=[];if(!t)return e.resolve(i),e;for(var o=function(o){var f=r[o];if(f instanceof n){if(f.resolved)return i[o]=f.value,t-=1,"continue"}else if(!u(f))return i[o]=f,t-=1,"continue";n.resolve(f).then(function(n){i[o]=n,0==(t-=1)&&e.resolve(i)},function(n){e.reject(n)})},f=0;f<r.length;f++)o(f);return 0===t&&e.resolve(i),e},n.hash=function(r){var e={};return n.all(Object.keys(r).map(function(t){return n.resolve(r[t]).then(function(n){e[t]=n})})).then(function(){return e})},n.map=function(r,e){return n.all(r.map(e))},n.onPossiblyUnhandledException=function(n){return function(n){return s.push(n),{cancel:function(){s.splice(s.indexOf(n),1)}}}(n)},n.try=function(r,e,t){if(r&&"function"!=typeof r&&!r.call)throw new Error("Promise.try expected a function");var i;w();try{i=r.apply(e,t||[])}catch(r){return v(),n.reject(r)}return v(),n.resolve(i)},n.delay=function(r){return new n(function(n){setTimeout(n,r)})},n.isPromise=function(r){return!!(r&&r instanceof n)||u(r)},n.flush=function(){return r=c=c||new n,d(),r;var r},n}(),l={u:"mock:",h:"file:",v:"about:"},p="Call was rejected by callee.\r\n";function E(n){return void 0===n&&(n=window),n.location.protocol===l.v}function y(n){if(n)try{if(n.parent&&n.parent!==n)return n.parent}catch(n){}}function m(n){try{return!0}catch(n){}return!1}function b(n){var r=(n=n||window).location;if(!r)throw new Error("Can not read window location");var e=r.protocol;if(!e)throw new Error("Can not read window protocol");if(e===l.h)return l.h+"//";if(e===l.v){var t=y(n);return t&&m()?b(t):l.v+"//"}var i=r.host;if(!i)throw new Error("Can not read window host");return e+"//"+i}function O(n){var r=b(n=n||window);return r&&n.mockDomain&&0===n.mockDomain.indexOf(l.u)?n.mockDomain:r}function C(n,r){if(!n||!r)return!1;var e=y(r);return e?e===n:-1!==function(n){var r=[];try{for(;n.parent!==n;)r.push(n.parent),n=n.parent}catch(n){}return r}(r).indexOf(n)}function T(n){if(n){try{if(n.top)return n.top}catch(n){}if(y(n)===n)return n;try{if(C(window,n)&&window.top)return window.top}catch(n){}try{if(C(n,window)&&window.top)return window.top}catch(n){}for(var r=0,e=function n(r){for(var e=[],t=0,i=function(n){var r,e,t=[];try{r=n.frames}catch(e){r=n}try{e=r.length}catch(n){}if(0===e)return t;if(e){for(var i=0;i<e;i++){var o=void 0;try{o=r[i]}catch(n){continue}t.push(o)}return t}for(var f=0;f<100;f++){var u=void 0;try{u=r[f]}catch(n){return t}if(!u)return t;t.push(u)}return t}(r);t<i.length;t++){var o=i[t];e.push(o);for(var f=0,u=n(o);f<u.length;f++)e.push(u[f])}return e}(n);r<e.length;r++){var t=e[r];try{if(t.top)return t.top}catch(n){}if(y(t)===t)return t}}}var A=[],R=[];function N(n,r){void 0===r&&(r=!0);try{if(n===window)return!1}catch(n){return!0}try{if(!n)return!0}catch(n){return!0}try{if(n.closed)return!0}catch(n){return!n||n.message!==p}if(r&&function(n){if(!function(n){try{if(n===window)return!0}catch(n){}try{var r=Object.getOwnPropertyDescriptor(n,"location");if(r&&!1===r.enumerable)return!1}catch(n){}try{if(E(n)&&m())return!0}catch(n){}try{if(b(n)===b(window))return!0}catch(n){}return!1}(n))return!1;try{if(n===window)return!0;if(E(n)&&m())return!0;if(O(window)===O(n))return!0}catch(n){}return!1}(n))try{if(n.mockclosed)return!0}catch(n){}try{if(!n.parent||!n.top)return!0}catch(n){}var e=function(n,r){for(var e=0;e<n.length;e++)try{if(n[e]===r)return e}catch(n){}return-1}(A,n);if(-1!==e){var t=R[e];if(t&&function(n){if(!n.contentWindow)return!0;if(!n.parentNode)return!0;var r=n.ownerDocument;return!(!r||!r.documentElement||r.documentElement.contains(n))}(t))return!0}return!1}function _(n){try{if(n===window)return!0}catch(n){if(n&&n.message===p)return!0}try{if("[object Window]"==={}.toString.call(n))return!0}catch(n){if(n&&n.message===p)return!0}try{if(window.Window&&n instanceof window.Window)return!0}catch(n){if(n&&n.message===p)return!0}try{if(n&&n.self===n)return!0}catch(n){if(n&&n.message===p)return!0}try{if(n&&n.parent===n)return!0}catch(n){if(n&&n.message===p)return!0}try{if(n&&n.top===n)return!0}catch(n){if(n&&n.message===p)return!0}return!1}function S(n,r){for(var e=0;e<n.length;e++)try{if(n[e]===r)return e}catch(n){}return-1}var j,P=Object.defineProperty,D=Date.now()%1e9,g=function(){function n(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,D+=1,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__"+D,function(){if("undefined"==typeof WeakMap)return!1;if(void 0===Object.freeze)return!1;try{var n=new WeakMap,r={};return Object.freeze(r),n.set(r,"__testvalue__"),"__testvalue__"===n.get(r)}catch(n){return!1}}())try{this.weakmap=new WeakMap}catch(n){}this.keys=[],this.values=[]}var r=n.prototype;return r._cleanupClosedWindows=function(){for(var n=this.weakmap,r=this.keys,e=0;e<r.length;e++){var t=r[e];if(_(t)&&N(t)){if(n)try{n.delete(t)}catch(n){}r.splice(e,1),this.values.splice(e,1),e-=1}}},r.isSafeToReadWrite=function(n){return!_(n)},r.set=function(n,r){if(!n)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{e.set(n,r)}catch(n){delete this.weakmap}if(this.isSafeToReadWrite(n)){var t=this.name,i=n[t];i&&i[0]===n?i[1]=r:P(n,t,{value:[n,r],writable:!0})}else{this._cleanupClosedWindows();var o=this.keys,f=this.values,u=S(o,n);-1===u?(o.push(n),f.push(r)):f[u]=r}},r.get=function(n){if(!n)throw new Error("WeakMap expected key");var r=this.weakmap;if(r)try{if(r.has(n))return r.get(n)}catch(n){delete this.weakmap}if(!this.isSafeToReadWrite(n)){this._cleanupClosedWindows();var e=S(this.keys,n);if(-1===e)return;return this.values[e]}var t=n[this.name];if(t&&t[0]===n)return t[1]},r.delete=function(n){if(!n)throw new Error("WeakMap expected key");var r=this.weakmap;if(r)try{r.delete(n)}catch(n){delete this.weakmap}if(this.isSafeToReadWrite(n)){var e=n[this.name];e&&e[0]===n&&(e[0]=e[1]=void 0)}else{this._cleanupClosedWindows();var t=this.keys,i=S(t,n);-1!==i&&(t.splice(i,1),this.values.splice(i,1))}},r.has=function(n){if(!n)throw new Error("WeakMap expected key");var r=this.weakmap;if(r)try{if(r.has(n))return!0}catch(n){delete this.weakmap}if(this.isSafeToReadWrite(n)){var e=n[this.name];return!(!e||e[0]!==n)}return this._cleanupClosedWindows(),-1!==S(this.keys,n)},r.getOrSet=function(n,r){if(this.has(n))return this.get(n);var e=r();return this.set(n,e),e},n}();function k(n,r){var e=this;void 0===r&&(r={});var t=new g;function i(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];var f=t.getOrSet(r.thisNamespace?this:n,function(){return{}}),u=function(n){try{return JSON.stringify([].slice.call(n),function(n,r){return"function"==typeof r?"memoize["+function(n){if(j=j||new g,null==n||"object"!=typeof n&&"function"!=typeof n)throw new Error("Invalid object");var r,e=j.get(n);return e||(e=typeof n+":"+(r="0123456789abcdef","xxxxxxxxxx".replace(/./g,function(){return r.charAt(Math.floor(Math.random()*r.length))})+"_"+function(n){if("function"==typeof btoa)return btoa(n);if("undefined"!=typeof Buffer)return Buffer.from(n,"utf8").toString("base64");throw new Error("Can not find window.btoa or Buffer")}((new Date).toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()),j.set(n,e)),e}(r)+"]":r})}catch(n){throw new Error("Arguments not serializable -- can not be used to memoize")}}(i),c=r.time;if(f[u]&&c&&Date.now()-f[u].time<c&&delete f[u],f[u])return f[u].value;var a=Date.now(),s=n.apply(this,arguments);return f[u]={time:a,value:s},f[u].value}return i.reset=function(){t.delete(r.thisNamespace?e:n)},r.name&&(i.displayName=r.name+":memoized"),i}function I(){}var M={O:13};Object.create(Error.prototype);var x,U={C:"content-type",T:"accept"},L=[];function B(n){var r=n.url,e=n.method,t=void 0===e?"get":e,i=n.headers,o=void 0===i?{}:i,f=n.json,u=n.data,c=n.body,a=n.win,s=void 0===a?window:a,h=n.timeout,d=void 0===h?0:h;return new z(function(n,e){if(f&&u||f&&c||u&&f)throw new Error("Only options.json or options.data or options.body should be passed");for(var i={},a=0,h=Object.keys(o);a<h.length;a++){var w=h[a];i[w.toLowerCase()]=o[w]}f?i[U.C]=i[U.C]||"application/json":(u||c)&&(i[U.C]=i[U.C]||"application/x-www-form-urlencoded; charset=utf-8"),i[U.T]=i[U.T]||"application/json";for(var v=0;v<L.length;v++)for(var z=(0,L[v])(),l=0,p=Object.keys(z);l<p.length;l++){var E=p[l];i[E.toLowerCase()]=z[E]}var y=new s.XMLHttpRequest;for(var m in y.addEventListener("load",function(){var i=function(n){void 0===n&&(n="");for(var r={},e=0,t=n.trim().split("\n");e<t.length;e++){var i=t[e].split(":"),o=i[0],f=i.slice(1);r[o.toLowerCase()]=f.join(":").trim()}return r}(this.getAllResponseHeaders());if(!this.status)return e(new Error("Request to "+t.toLowerCase()+" "+r+" failed: no response status code."));var o=i["content-type"],f=o&&(0===o.indexOf("application/json")||0===o.indexOf("text/json")),u=this.responseText;try{u=JSON.parse(u)}catch(n){if(f)return e(new Error("Invalid json: "+this.responseText+"."))}return n({status:this.status,headers:i,body:u})},!1),y.addEventListener("error",function(n){e(new Error("Request to "+t.toLowerCase()+" "+r+" failed: "+n.toString()+"."))},!1),y.open(t,r,!0),i)i.hasOwnProperty(m)&&y.setRequestHeader(m,i[m]);f?c=JSON.stringify(f):u&&(c=Object.keys(u).map(function(n){return encodeURIComponent(n)+"="+(u?encodeURIComponent(u[n]):"")}).join("&")),y.timeout=d,y.ontimeout=function(){e(new Error("Request to "+t.toLowerCase()+" "+r+" has timed out"))},y.send(c)})}var W=((x={}).AD=["en","fr","es","zh"],x.AE=["en","fr","es","zh","ar"],x.AG=["en","fr","es","zh"],x.AI=["en","fr","es","zh"],x.AL=["en"],x.AM=["en","fr","es","zh"],x.AN=["en","fr","es","zh"],x.AO=["en","fr","es","zh"],x.AR=["es","en"],x.AT=["de","en"],x.AU=["en"],x.AW=["en","fr","es","zh"],x.AZ=["en","fr","es","zh"],x.BA=["en"],x.BB=["en","fr","es","zh"],x.BE=["en","nl","fr"],x.BF=["fr","en","es","zh"],x.BG=["en"],x.BH=["ar","en","fr","es","zh"],x.BI=["fr","en","es","zh"],x.BJ=["fr","en","es","zh"],x.BM=["en","fr","es","zh"],x.BN=["en"],x.BO=["es","en","fr","zh"],x.BR=["pt","en"],x.BS=["en","fr","es","zh"],x.BT=["en"],x.BW=["en","fr","es","zh"],x.BY=["en"],x.BZ=["en","es","fr","zh"],x.CA=["en","fr"],x.CD=["fr","en","es","zh"],x.CG=["en","fr","es","zh"],x.CH=["de","fr","en"],x.CI=["fr","en"],x.CK=["en","fr","es","zh"],x.CL=["es","en","fr","zh"],x.CM=["fr","en"],x.CN=["zh"],x.CO=["es","en","fr","zh"],x.CR=["es","en","fr","zh"],x.CV=["en","fr","es","zh"],x.CY=["en"],x.CZ=["cs","en","fr","es","zh"],x.DE=["de","en"],x.DJ=["fr","en","es","zh"],x.DK=["da","en"],x.DM=["en","fr","es","zh"],x.DO=["es","en","fr","zh"],x.DZ=["ar","en","fr","es","zh"],x.EC=["es","en","fr","zh"],x.EE=["en","ru","fr","es","zh"],x.EG=["ar","en","fr","es","zh"],x.ER=["en","fr","es","zh"],x.ES=["es","en"],x.ET=["en","fr","es","zh"],x.FI=["fi","en","fr","es","zh"],x.FJ=["en","fr","es","zh"],x.FK=["en","fr","es","zh"],x.FM=["en"],x.FO=["da","en","fr","es","zh"],x.FR=["fr","en"],x.GA=["fr","en","es","zh"],x.GB=["en"],x.GD=["en","fr","es","zh"],x.GE=["en","fr","es","zh"],x.GF=["en","fr","es","zh"],x.GI=["en","fr","es","zh"],x.GL=["da","en","fr","es","zh"],x.GM=["en","fr","es","zh"],x.GN=["fr","en","es","zh"],x.GP=["en","fr","es","zh"],x.GR=["el","en","fr","es","zh"],x.GT=["es","en","fr","zh"],x.GW=["en","fr","es","zh"],x.GY=["en","fr","es","zh"],x.HK=["en","zh"],x.HN=["es","en","fr","zh"],x.HR=["en"],x.HU=["hu","en","fr","es","zh"],x.ID=["id","en"],x.IE=["en","fr","es","zh"],x.IL=["he","en"],x.IN=["en"],x.IS=["en"],x.IT=["it","en"],x.JM=["en","es","fr","zh"],x.JO=["ar","en","fr","es","zh"],x.JP=["ja","en"],x.KE=["en","fr","es","zh"],x.KG=["en","fr","es","zh"],x.KH=["en"],x.KI=["en","fr","es","zh"],x.KM=["fr","en","es","zh"],x.KN=["en","fr","es","zh"],x.KR=["ko","en"],x.KW=["ar","en","fr","es","zh"],x.KY=["en","fr","es","zh"],x.KZ=["en","fr","es","zh"],x.LA=["en"],x.LC=["en","fr","es","zh"],x.LI=["en","fr","es","zh"],x.LK=["en"],x.LS=["en","fr","es","zh"],x.LT=["en","ru","fr","es","zh"],x.LU=["en","de","fr","es","zh"],x.LV=["en","ru","fr","es","zh"],x.MA=["ar","en","fr","es","zh"],x.MC=["fr","en"],x.MD=["en"],x.ME=["en"],x.MG=["en","fr","es","zh"],x.MH=["en","fr","es","zh"],x.MK=["en"],x.ML=["fr","en","es","zh"],x.MN=["en"],x.MQ=["en","fr","es","zh"],x.MR=["en","fr","es","zh"],x.MS=["en","fr","es","zh"],x.MT=["en"],x.MU=["en","fr","es","zh"],x.MV=["en"],x.MW=["en","fr","es","zh"],x.MX=["es","en"],x.MY=["en"],x.MZ=["en","fr","es","zh"],x.NA=["en","fr","es","zh"],x.NC=["en","fr","es","zh"],x.NE=["fr","en","es","zh"],x.NF=["en","fr","es","zh"],x.NG=["en"],x.NI=["es","en","fr","zh"],x.NL=["nl","en"],x.NO=["no","en"],x.NP=["en"],x.NR=["en","fr","es","zh"],x.NU=["en","fr","es","zh"],x.NZ=["en","fr","es","zh"],x.OM=["ar","en","fr","es","zh"],x.PA=["es","en","fr","zh"],x.PE=["es","en","fr","zh"],x.PF=["en","fr","es","zh"],x.PG=["en","fr","es","zh"],x.PH=["en"],x.PL=["pl","en"],x.PM=["en","fr","es","zh"],x.PN=["en","fr","es","zh"],x.PT=["pt","en"],x.PW=["en","fr","es","zh"],x.PY=["es","en"],x.QA=["en","fr","es","zh","ar"],x.RE=["en","fr","es","zh"],x.RO=["en","fr","es","zh"],x.RS=["en","fr","es","zh"],x.RU=["ru","en"],x.RW=["fr","en","es","zh"],x.SA=["ar","en","fr","es","zh"],x.SB=["en","fr","es","zh"],x.SC=["fr","en","es","zh"],x.SE=["sv","en"],x.SG=["en"],x.SH=["en","fr","es","zh"],x.SI=["en","fr","es","zh"],x.SJ=["en","fr","es","zh"],x.SK=["sk","en","fr","es","zh"],x.SL=["en","fr","es","zh"],x.SM=["en","fr","es","zh"],x.SN=["fr","en","es","zh"],x.SO=["en","fr","es","zh"],x.SR=["en","fr","es","zh"],x.ST=["en","fr","es","zh"],x.SV=["es","en","fr","zh"],x.SZ=["en","fr","es","zh"],x.TC=["en","fr","es","zh"],x.TD=["fr","en","es","zh"],x.TG=["fr","en","es","zh"],x.TH=["th","en"],x.TJ=["en","fr","es","zh"],x.TM=["en","fr","es","zh"],x.TN=["ar","en","fr","es","zh"],x.TO=["en"],x.TR=["tr","en"],x.TT=["en","fr","es","zh"],x.TV=["en","fr","es","zh"],x.TW=["zh","en"],x.TZ=["en","fr","es","zh"],x.UA=["en","ru","fr","es","zh"],x.UG=["en","fr","es","zh"],x.US=["en","fr","es","zh"],x.UY=["es","en","fr","zh"],x.VA=["en","fr","es","zh"],x.VC=["en","fr","es","zh"],x.VE=["es","en","fr","zh"],x.VG=["en","fr","es","zh"],x.VN=["en"],x.VU=["en","fr","es","zh"],x.WF=["en","fr","es","zh"],x.WS=["en"],x.YE=["ar","en","fr","es","zh"],x.YT=["en","fr","es","zh"],x.ZA=["en","fr","es","zh"],x.ZM=["en","fr","es","zh"],x.ZW=["en"],{A:"components",ENV:"env",R:"debug",N:"cachebust",_:"client-id",S:"merchant-id",j:"locale",P:"currency",D:"intent",g:"commit",k:"vault",I:"buyer-country",M:"disable-funding",U:"disable-card",L:"locale-country",B:"locale-lang",W:"framework",Y:"integration-date",F:"order-currency",H:"order-intent",G:"order-commit",K:"order-vault"}),Y={q:"capture",V:"authorize",J:"order"},F={Z:"paypal",$:"venmo",X:"credit",nn:"card",rn:"ideal",en:"sepa",tn:"bancontact",in:"giropay",on:"sofort",EPS:"eps",fn:"mybank",P24:"p24",un:"zimpler",cn:"wechatpay"},H={an:"/smart/api/auth",sn:"/smart/api/checkout",J:"/smart/api/order",hn:"/smart/api/payment",dn:"/graphql"},G="smart_buttons",K={wn:"x-csrf-jwt",vn:"x-source"},q={zn:"CC_PROCESSOR_DECLINED",ln:"INSTRUMENT_DECLINED"},V={pn:"iframe",En:"popup"},J={yn:"body"},Z=/^(EC-)?[A-Z0-9]+$/,Q="https://www.paypal.com/checkoutnow/error",$={},X="";function nn(n){var r,e=n.url,t=n.method,i=void 0===t?"get":t,o=n.json,u=f({},$,((r={})[K.wn]=X,r[K.vn]=G,r));return B({url:e,method:i,headers:u,json:o}).then(function(n){var r=n.status,t=n.body;if(X=n.headers[K.wn],"contingency"===t.ack)throw new Error(t.contingency);if(r>400)throw new Error("Api: "+e+" returned status code: "+r);if("success"!==t.ack)throw new Error("Api: "+e+" returned ack: "+t.ack);return t.data})}function rn(){return nn({url:H.an})}function en(n,r){return nn({method:"post",url:H.J+"/"+n+"/patch",json:{data:{patch:r}}})}var tn=k(function(n){return $["x-paypal-internal-euat"]=n,rn().then(I)});function on(n){if(!n.match(Z))throw new Error(n+" does not match pattern for order-id, ec-token or cart-id");return(r='\n        checkout {\n            checkoutSession(token : "'+n+'") {\n                cart {\n                    intent\n                    returnUrl {\n                        href\n                    }\n                    cancelUrl {\n                        href\n                    }\n                    amounts {\n                        total {\n                            currencyCode\n                        }\n                    }\n                }\n            }\n        }\n    ',B({url:H.dn,method:"POST",json:{query:"\n                query {\n                    "+r+"\n                }\n            "}}).then(function(n){var r=n.body,e=(r.errors||[]).filter(function(n){return"ACCOUNT_CANNOT_BE_FETCHED"!==n.message});if(e.length){var t=e[0].message||JSON.stringify(e[0]);throw new Error(t)}return r})).then(function(n){var r=n.data.checkout.checkoutSession.cart,e="sale"===r.intent.toLowerCase()?Y.q:r.intent.toLowerCase(),t=r.amounts&&r.amounts.total.currencyCode,i=r.returnUrl&&r.returnUrl.href,o=r.cancelUrl&&r.cancelUrl.href,f=window.xprops.intent,u=window.xprops.currency;if(e!==f)throw new Error("Expected intent from order api call to be "+f+", got "+e+". Please ensure you are passing "+W.D+"="+e+" to the sdk");if(t&&t!==u)throw new Error("Expected currency from order api call to be "+u+", got "+t+". Please ensure you are passing "+W.P+"="+t+" to the sdk");if(i&&0!==i.indexOf(Q))throw new Error('Expected return url to be either blank, or "'+Q+'". Return url is forbidden for smart payment button integration.');if(o&&0!==o.indexOf(Q))throw new Error('Expected cancel url to be either blank, or "'+Q+'". Cancel url is forbidden for smart payment button integration.')});var r}var fn=!1,un=!1;function cn(){return void 0===n&&(n=i()),function(n){return void 0===n&&(n=i()),!!function(n){return void 0===n&&(n=i()),/iPhone|iPod|iPad/.test(n)}(n)&&(!!function(n){return void 0===n&&(n=i()),/\bGSA\b/.test(n)}(n)||/.+AppleWebKit(?!.*Safari)/.test(n))}(n)||function(n){return void 0===n&&(n=i()),!!function(n){return void 0===n&&(n=i()),/Android/.test(n)}(n)&&/Version\/[\d.]+/.test(n)&&!o(n)}(n)||o(n)||function(n){return void 0===n&&(n=i()),/FxiOS/i.test(n)}(n)||function(n){return void 0===n&&(n=i()),/EdgiOS/i.test(n)}(n)||function(n){return void 0===n&&(n=i()),-1!==n.indexOf("FBAN")||-1!==n.indexOf("FBAV")}(n)||function(n){return void 0===n&&(n=i()),/QQBrowser/.test(n)}(n)||"undefined"!=typeof process&&process.versions&&process.versions.electron||(r=i(),/Macintosh.*AppleWebKit(?!.*Safari)/i.test(r))||!0===window.navigator.standalone||window.matchMedia("(display-mode: standalone)").matches?V.pn:V.En;var n,r}function an(n,r,e){if(void 0===r&&(r=cn()),void 0===e&&(e=z.resolve(!0)),fn)throw new Error("Checkout already rendered");var t,i=function(n,r){return void 0===n&&(n={}),k(function(){return r.then(function(r){if(r){if(n.createOrder)return n.createOrder();if(window.xprops.createBillingAgreement)return window.xprops.createBillingAgreement().then(function(n){return function(n){return nn({method:"post",url:H.hn+"/"+n+"/ectoken"}).then(function(n){return n.token})}(n)});if(window.xprops.createOrder)return window.xprops.createOrder();throw new Error("No mechanism to create order")}return new z(I)})})}(n,e),o=n.fundingSource,u=!1,c=function(){return z.try(function(){return!u&&e}).then(function(n){if(n)return i().then(function(n){return window.xprops.onCancel({orderID:n})}).catch(function(n){return window.xprops.onError(n)})})},a=c,s=window.xprops.onShippingChange&&function(n,r){return window.xprops.onShippingChange(n,f({},r,(e=n.orderID,{order:{patch:function(n){return void 0===n&&(n=[]),en(e,n).catch(function(){throw new Error("Order could not be patched")})}}})));var e},h=function(){var n="";return document.body&&(n=document.body.getAttribute("data-nonce")||""),n}(),d=window.xprops,w=window.paypal.Checkout(f({},n,{createOrder:i,onApprove:function(n){var r=n.orderID,e=n.payerID,t=n.paymentID,i=n.billingToken;u=!0;var f=function(n,r,e){var t=k(function(){return n.close().then(function(){return an({fundingSource:e,createOrder:function(){return z.resolve(r)}},"iframe")}).catch(I).then(function(){return new z(I)})}),i=function(n){if(n&&n.message===q.zn)return t();if(n&&n.message===q.ln)return t();throw new Error("Order could not be captured")},o=k(function(){return function(n){return nn({url:H.J+"/"+n})}(r)}),f=k(function(){if(window.xprops.intent!==Y.q)throw new Error("Use "+W.D+"="+Y.q+" to use client-side capture");return function(n){return nn({method:"post",url:H.J+"/"+n+"/capture"})}(r).catch(i).finally(o.reset)}),u=k(function(){return function(n){return nn({method:"post",url:H.J+"/"+n+"/authorize"})}(r).catch(i).finally(o.reset)});return{restart:t,order:{capture:f,authorize:u,patch:function(n){return void 0===n&&(n=[]),en(r,n).catch(function(){throw new Error("Order could not be patched")})},get:o}}}(w,r,o);return window.xprops.onApprove({orderID:r,payerID:e,paymentID:t,billingToken:i},f).catch(function(n){return window.xprops.onError(n)})},onCancel:c,onError:d.onError,onAuth:function(n){return tn(n.accessToken)},onClose:a,onShippingChange:s,locale:d.locale,commit:d.commit,nonce:h}));return i().then(on).catch(function(n){return z.all([w.close(),w.onError(n)])}),e.then(function(n){n||w.close()}),w.renderTo((t=T(window),un&&t?t:window.xprops.getParent()),J.yn,r)}function sn(n){var r=n.fundingSource,e=n.card,t=!0;return z.try(function(){if(window.xprops.onClick)return window.xprops.onClick({fundingSource:r,card:e},{resolve:function(){return z.try(function(){t=!0})},reject:function(){return z.try(function(){t=!1})}})}).then(function(){return t})}function hn(n){var r=!0;if(!window.paypal)throw new Error("PayPal library not loaded");var e,t={};return t.onInit=z.try(function(){if(window.xprops.onInit)return window.xprops.onInit({},{enable:function(){return z.try(function(){r=!0})},disable:function(){return z.try(function(){r=!1})}})}),(".paypal-button",void 0===e&&(e=window.document),[].slice.call(e.querySelectorAll(".paypal-button"))).forEach(function(n){var e,t,i=function(n){return{fundingSource:n.getAttribute("data-funding-source"),card:n.getAttribute("data-card")}}(n),o=i.fundingSource,f=i.card;t=function(n){n.preventDefault(),n.stopPropagation();var e=sn({fundingSource:o,card:f});r&&an({fundingSource:o,card:f},cn(),e).catch(I)},(e=n).addEventListener("touchstart",I),e.addEventListener("click",t),e.addEventListener("keypress",function(n){if(n.keyCode===M.O)return t(n)})}),t.getAuth=rn().then(I),t.prerender=t.onInit.then(function(){return window.xprops.getPrerenderDetails().then(function(n){if(n){var e=n.win,t=n.order,i=n.fundingSource,o=n.card,f=sn({fundingSource:i,card:o});if(!r)return e.close();an({window:e,createOrder:t?function(){return t}:null,fundingSource:i,card:o},cn(),f).catch(I)}})}),t.remember=z.try(function(){if(n&&n.venmo.eligible)return window.xprops.remember([F.$])}),t.setupCheckout=function(){var n=[y(window),T(window)],r=n[0],e=n[1],t={};return e&&r&&r!==e&&(t.canRenderTo=window.paypal.Checkout.canRenderTo(e).then(function(n){un=n})),z.hash(t).then(I)}(),z.hash(t).then(I)}e.d(r,"setupButton",function(){return hn})}]);
//# sourceMappingURL=smart-payment-buttons.min.js.map