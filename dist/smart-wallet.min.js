!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("spb",[],t):"object"==typeof exports?exports.spb=t():e.spb=t()}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return{}.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r,o,i,a,c,u={},s=[],l=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function f(e,t){for(var n in t)e[n]=t[n];return e}function p(e){var t=e.parentNode;t&&t.removeChild(e)}function d(e,t,n){var r,o=arguments,i={};for(r in t)"key"!==r&&"ref"!==r&&(i[r]=t[r]);if(arguments.length>3)for(n=[n],r=3;r<arguments.length;r++)n.push(o[r]);if(null!=n&&(i.children=n),"function"==typeof e&&null!=e.defaultProps)for(r in e.defaultProps)void 0===i[r]&&(i[r]=e.defaultProps[r]);return h(e,i,t&&t.key,t&&t.ref)}function h(e,t,n,o){var i={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0};return r.vnode&&r.vnode(i),i}function _(e){return e.children}function v(e,t){this.props=e,this.context=t}function y(e,t){if(null==t)return e.__?y(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?y(e):null}function m(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return m(e)}}function w(e){(!e.__d&&(e.__d=!0)&&1===o.push(e)||a!==r.debounceRendering)&&((a=r.debounceRendering)||i)(b)}function b(){var e,t,n,r,i,a,c;for(o.sort((function(e,t){return t.__v.__b-e.__v.__b}));e=o.pop();)e.__d&&(n=void 0,r=void 0,a=(i=(t=e).__v).__e,(c=t.__P)&&(n=[],r=T(c,i,f({},i),t.__n,void 0!==c.ownerSVGElement,null,n,null==a?y(i):a),D(n,i),r!=a&&m(i)))}function g(e,t,n,r,o,i,a,c,l){var f,d,_,v,m,w,b,g=n&&n.__k||s,k=g.length;if(c==u&&(c=null!=i?i[0]:k?y(n,0):null),f=0,t.__k=function e(t,n,r){if(null==r&&(r=[]),null==t||"boolean"==typeof t)n&&r.push(n(null));else if(Array.isArray(t))for(var o=0;o<t.length;o++)e(t[o],n,r);else r.push(n?n("string"==typeof t||"number"==typeof t?h(null,t,null,null):null!=t.__e||null!=t.__c?h(t.type,t.props,t.key,null):t):t);return r}(t.__k,(function(n){if(null!=n){if(n.__=t,n.__b=t.__b+1,null===(_=g[f])||_&&n.key==_.key&&n.type===_.type)g[f]=void 0;else for(d=0;d<k;d++){if((_=g[d])&&n.key==_.key&&n.type===_.type){g[d]=void 0;break}_=null}if(v=T(e,n,_=_||u,r,o,i,a,c,l),(d=n.ref)&&_.ref!=d&&(b||(b=[]),_.ref&&b.push(_.ref,null,n),b.push(d,n.__c||v,n)),null!=v){var s;if(null==w&&(w=v),void 0!==n.__d)s=n.__d,n.__d=void 0;else if(i==_||v!=c||null==v.parentNode){e:if(null==c||c.parentNode!==e)e.appendChild(v),s=null;else{for(m=c,d=0;(m=m.nextSibling)&&d<k;d+=2)if(m==v)break e;e.insertBefore(v,c),s=c}"option"==t.type&&(e.value="")}c=void 0!==s?s:v.nextSibling,"function"==typeof t.type&&(t.__d=c)}}return f++,n})),t.__e=w,null!=i&&"function"!=typeof t.type)for(f=i.length;f--;)null!=i[f]&&p(i[f]);for(f=k;f--;)null!=g[f]&&S(g[f],g[f]);if(b)for(f=0;f<b.length;f++)E(b[f],b[++f],b[++f])}function k(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===l.test(t)?n+"px":null==n?"":n}function A(e,t,n,r,o){var i,a,c,u,s;if(o?"className"===t&&(t="class"):"class"===t&&(t="className"),"key"===t||"children"===t);else if("style"===t)if(i=e.style,"string"==typeof n)i.cssText=n;else{if("string"==typeof r&&(i.cssText="",r=null),r)for(a in r)n&&a in n||k(i,a,"");if(n)for(c in n)r&&n[c]===r[c]||k(i,c,n[c])}else"o"===t[0]&&"n"===t[1]?(u=t!==(t=t.replace(/Capture$/,"")),s=t.toLowerCase(),t=(s in e?s:t).slice(2),n?(r||e.addEventListener(t,I,u),(e.l||(e.l={}))[t]=n):e.removeEventListener(t,I,u)):"list"!==t&&"tagName"!==t&&"form"!==t&&"type"!==t&&"size"!==t&&!o&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n?e.removeAttribute(t):e.setAttribute(t,n))}function I(e){this.l[e.type](r.event?r.event(e):e)}function T(e,t,n,o,i,a,c,u,s){var l,p,d,h,y,m,w,b,k,A,I=t.type;if(void 0!==t.constructor)return null;(l=r.__b)&&l(t);try{e:if("function"==typeof I){if(b=t.props,k=(l=I.contextType)&&o[l.__c],A=l?k?k.props.value:l.__:o,n.__c?w=(p=t.__c=n.__c).__=p.__E:("prototype"in I&&I.prototype.render?t.__c=p=new I(b,A):(t.__c=p=new v(b,A),p.constructor=I,p.render=j),k&&k.sub(p),p.props=b,p.state||(p.state={}),p.context=A,p.__n=o,d=p.__d=!0,p.__h=[]),null==p.__s&&(p.__s=p.state),null!=I.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=f({},p.__s)),f(p.__s,I.getDerivedStateFromProps(b,p.__s))),h=p.props,y=p.state,d)null==I.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(null==I.getDerivedStateFromProps&&b!==h&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(b,A),!p.__e&&null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(b,p.__s,A)){for(p.props=b,p.state=p.__s,p.__d=!1,p.__v=t,t.__e=n.__e,t.__k=n.__k,p.__h.length&&c.push(p),l=0;l<t.__k.length;l++)t.__k[l]&&(t.__k[l].__=t);break e}null!=p.componentWillUpdate&&p.componentWillUpdate(b,p.__s,A),null!=p.componentDidUpdate&&p.__h.push((function(){p.componentDidUpdate(h,y,m)}))}p.context=A,p.props=b,p.state=p.__s,(l=r.__r)&&l(t),p.__d=!1,p.__v=t,p.__P=e,l=p.render(p.props,p.state,p.context),t.__k=null!=l&&l.type==_&&null==l.key?l.props.children:l,null!=p.getChildContext&&(o=f(f({},o),p.getChildContext())),d||null==p.getSnapshotBeforeUpdate||(m=p.getSnapshotBeforeUpdate(h,y)),g(e,t,n,o,i,a,c,u,s),p.base=t.__e,p.__h.length&&c.push(p),w&&(p.__E=p.__=null),p.__e=!1}else t.__e=x(n.__e,t,n,o,i,a,c,s);(l=r.diffed)&&l(t)}catch(e){r.__e(e,t,n)}return t.__e}function D(e,t){r.__c&&r.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){r.__e(e,t.__v)}}))}function x(e,t,n,r,o,i,a,c){var l,f,p,d,h,_=n.props,v=t.props;if(o="svg"===t.type||o,null==e&&null!=i)for(l=0;l<i.length;l++)if(null!=(f=i[l])&&(null===t.type?3===f.nodeType:f.localName===t.type)){e=f,i[l]=null;break}if(null==e){if(null===t.type)return document.createTextNode(v);e=o?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type,v.is&&{is:v.is}),i=null}if(null===t.type)null!=i&&(i[i.indexOf(e)]=null),_!==v&&e.data!=v&&(e.data=v);else if(t!==n){if(null!=i&&(i[i.indexOf(e)]=null,i=s.slice.call(e.childNodes)),p=(_=n.props||u).dangerouslySetInnerHTML,d=v.dangerouslySetInnerHTML,!c){if(_===u)for(_={},h=0;h<e.attributes.length;h++)_[e.attributes[h].name]=e.attributes[h].value;(d||p)&&(d&&p&&d.__html==p.__html||(e.innerHTML=d&&d.__html||""))}(function(e,t,n,r,o){var i;for(i in n)i in t||A(e,i,null,n[i],r);for(i in t)o&&"function"!=typeof t[i]||"value"===i||"checked"===i||n[i]===t[i]||A(e,i,t[i],n[i],r)})(e,v,_,o,c),t.__k=t.props.children,d||g(e,t,n,r,"foreignObject"!==t.type&&o,i,a,u,c),c||("value"in v&&void 0!==v.value&&v.value!==e.value&&(e.value=null==v.value?"":v.value),"checked"in v&&void 0!==v.checked&&v.checked!==e.checked&&(e.checked=v.checked))}return e}function E(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){r.__e(e,n)}}function S(e,t,n){var o,i,a;if(r.unmount&&r.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||E(o,null,t)),n||"function"==typeof e.type||(n=null!=(i=e.__e)),e.__e=e.__d=void 0,null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){r.__e(e,t)}o.base=o.__P=null}if(o=e.__k)for(a=0;a<o.length;a++)o[a]&&S(o[a],t,n);null!=i&&p(i)}function j(e,t,n){return this.constructor(e,n)}r={__e:function(e,t){for(var n,r;t=t.__;)if((n=t.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(r=!0,n.setState(n.constructor.getDerivedStateFromError(e))),null!=n.componentDidCatch&&(r=!0,n.componentDidCatch(e)),r)return w(n.__E=n)}catch(t){e=t}throw e}},v.prototype.setState=function(e,t){var n;n=this.__s!==this.state?this.__s:this.__s=f({},this.state),"function"==typeof e&&(e=e(n,this.props)),e&&f(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),w(this))},v.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),w(this))},v.prototype.render=_,o=[],i="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,c=u;var O=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i,P=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},C=function(e,t){return String(e).replace(/(\n+)/g,"$1"+(t||"\t"))},N=function(e,t,n){return String(e).length>(t||40)||!n&&-1!==String(e).indexOf("\n")||-1!==String(e).indexOf("<")},R={};function H(e){var t="";for(var n in e){var r=e[n];null!=r&&(t&&(t+=" "),t+=R[n]||(R[n]=n.replace(/([A-Z])/g,"-$1").toLowerCase()),t+=": ",t+=r,"number"==typeof r&&!1===O.test(n)&&(t+="px"),t+=";")}return t||void 0}function W(e,t){for(var n in t)e[n]=t[n];return e}function L(e,t){return Array.isArray(t)?t.reduce(L,e):null!=t&&!1!==t&&e.push(t),e}var U={shallow:!0},M=[],z=/^(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/;function q(e,t,n,o,i,a){if(null==e||"boolean"==typeof e)return"";Array.isArray(e)&&(e=d(_,null,e));var c=e.type,u=e.props,s=!1;t=t||{};var l,f=(n=n||{}).pretty,p=f&&"string"==typeof f?f:"\t";if("object"!=typeof e&&!c)return P(e);if("function"==typeof c){if(s=!0,!n.shallow||!o&&!1!==n.renderRootComponent){if(c===_){var h="",v=[];L(v,e.props.children);for(var y=0;y<v.length;y++)h+=(y>0&&f?"\n":"")+q(v[y],t,n,!1!==n.shallowHighOrder,i,a);return h}var m,w=e.__c={__v:e,context:t,props:e.props,__h:[]};if(r.__r&&r.__r(e),c.prototype&&"function"==typeof c.prototype.render){var b=c.contextType,g=b&&t[b.__c],k=null!=b?g?g.props.value:b.__:t;(w=e.__c=new c(u,k)).__v=e,w._dirty=w.__d=!0,w.props=u,null==w.state&&(w.state={}),null==w._nextState&&null==w.__s&&(w._nextState=w.__s=w.state),w.context=k,c.getDerivedStateFromProps?w.state=W(W({},w.state),c.getDerivedStateFromProps(w.props,w.state)):w.componentWillMount&&w.componentWillMount(),w.state=w._nextState!==w.state?w._nextState:w.__s!==w.state?w.__s:w.state,m=w.render(w.props,w.state,w.context)}else{var A=c.contextType,I=A&&t[A.__c];m=c.call(e.__c,u,null!=A?I?I.props.value:A.__:t)}return w.getChildContext&&(t=W(W({},t),w.getChildContext())),q(m,t,n,!1!==n.shallowHighOrder,i,a)}c=(l=c).displayName||l!==Function&&l.name||function(e){var t=(function(){}.toString.call(e).match(/^\s*function\s+([^( ]+)/)||"")[1];if(!t){for(var n=-1,r=M.length;r--;)if(M[r]===e){n=r;break}n<0&&(n=M.push(e)-1),t="UnnamedComponent"+n}return t}(l)}var T,D="";if(u){var x=Object.keys(u);n&&!0===n.sortAttributes&&x.sort();for(var E=0;E<x.length;E++){var S=x[E],j=u[S];if("children"!==S&&!S.match(/[\s\n\\/='"\0<>]/)&&(n&&n.allAttributes||"key"!==S&&"ref"!==S)){if("className"===S){if(u.class)continue;S="class"}else i&&S.match(/^xlink:?./)&&(S=S.toLowerCase().replace(/^xlink:?/,"xlink:"));"style"===S&&j&&"object"==typeof j&&(j=H(j));var O=n.attributeHook&&n.attributeHook(S,j,t,n,s);if(O||""===O)D+=O;else if("dangerouslySetInnerHTML"===S)T=j&&j.__html;else if((j||0===j||""===j)&&"function"!=typeof j){if(!(!0!==j&&""!==j||(j=S,n&&n.xml))){D+=" "+S;continue}if("value"===S){if("select"===c){a=j;continue}"option"===c&&a==j&&(D+=" selected")}D+=" "+S+'="'+P(j)+'"'}}}}if(f){var R=D.replace(/^\n\s*/," ");R===D||~R.indexOf("\n")?f&&~D.indexOf("\n")&&(D+="\n"):D=R}if(D="<"+c+D+">",String(c).match(/[\s\n\\/='"\0<>]/))throw new Error(c+" is not a valid HTML tag name in "+D);var U=String(c).match(z);U&&(D=D.replace(/>$/," />"));var F,$=[];if(T)f&&N(T)&&(T="\n"+p+C(T,p)),D+=T;else if(u&&L(F=[],u.children).length){for(var B=f&&~D.indexOf("\n"),X=!1,Y=0;Y<F.length;Y++){var J=F[Y];if(null!=J&&!1!==J){var Z=q(J,t,n,!0,"svg"===c||"foreignObject"!==c&&i,a);if(f&&!B&&N(Z)&&(B=!0),Z)if(f){var G=Z.length>0&&"<"!=Z[0];X&&G?$[$.length-1]+=Z:$.push(Z),X=G}else $.push(Z)}}if(f&&B)for(var Q=$.length;Q--;)$[Q]="\n"+p+C($[Q],p)}if($.length)D+=$.join("");else if(n&&n.xml)return D.substring(0,D.length-1)+" />";return U||(f&&~D.indexOf("\n")&&(D+="\n"),D+="</"+c+">"),D}q.render=q,q.shallowRender=function(e,t){return q(e,t,U)};var F=q;function $(e){try{if(!e)return!1;if("undefined"!=typeof Promise&&e instanceof Promise)return!0;if("undefined"!=typeof window&&"function"==typeof window.Window&&e instanceof window.Window)return!1;if("undefined"!=typeof window&&"function"==typeof window.constructor&&e instanceof window.constructor)return!1;var t={}.toString;if(t){var n=t.call(e);if("[object Window]"===n||"[object global]"===n||"[object DOMWindow]"===n)return!1}if("function"==typeof e.then)return!0}catch(e){return!1}return!1}var B,X=[],Y=[],J=0;function Z(){if(!J&&B){var e=B;B=null,e.resolve()}}function G(){J+=1}function Q(){J-=1,Z()}var V=function(){function e(e){var t=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],e){var n,r,o=!1,i=!1,a=!1;G();try{e((function(e){a?t.resolve(e):(o=!0,n=e)}),(function(e){a?t.reject(e):(i=!0,r=e)}))}catch(e){return Q(),void this.reject(e)}Q(),a=!0,o?this.resolve(n):i&&this.reject(r)}}var t=e.prototype;return t.resolve=function(e){if(this.resolved||this.rejected)return this;if($(e))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=e,this.dispatch(),this},t.reject=function(e){var t=this;if(this.resolved||this.rejected)return this;if($(e))throw new Error("Can not reject promise with another promise");if(!e){var n=e&&"function"==typeof e.toString?e.toString():{}.toString.call(e);e=new Error("Expected reject to be called with Error, got "+n)}return this.rejected=!0,this.error=e,this.errorHandled||setTimeout((function(){t.errorHandled||function(e,t){if(-1===X.indexOf(e)){X.push(e),setTimeout((function(){throw e}),1);for(var n=0;n<Y.length;n++)Y[n](e,t)}}(e,t)}),1),this.dispatch(),this},t.asyncReject=function(e){return this.errorHandled=!0,this.reject(e),this},t.dispatch=function(){var t=this.resolved,n=this.rejected,r=this.handlers;if(!this.dispatching&&(t||n)){this.dispatching=!0,G();for(var o=function(e,t){return e.then((function(e){t.resolve(e)}),(function(e){t.reject(e)}))},i=0;i<r.length;i++){var a=r[i],c=a.onSuccess,u=a.onError,s=a.promise,l=void 0;if(t)try{l=c?c(this.value):this.value}catch(e){s.reject(e);continue}else if(n){if(!u){s.reject(this.error);continue}try{l=u(this.error)}catch(e){s.reject(e);continue}}l instanceof e&&(l.resolved||l.rejected)?(l.resolved?s.resolve(l.value):s.reject(l.error),l.errorHandled=!0):$(l)?l instanceof e&&(l.resolved||l.rejected)?l.resolved?s.resolve(l.value):s.reject(l.error):o(l,s):s.resolve(l)}r.length=0,this.dispatching=!1,Q()}},t.then=function(t,n){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.then expected a function for success handler");if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.then expected a function for error handler");var r=new e;return this.handlers.push({promise:r,onSuccess:t,onError:n}),this.errorHandled=!0,this.dispatch(),r},t.catch=function(e){return this.then(void 0,e)},t.finally=function(t){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.finally expected a function");return this.then((function(n){return e.try(t).then((function(){return n}))}),(function(n){return e.try(t).then((function(){throw n}))}))},t.timeout=function(e,t){var n=this;if(this.resolved||this.rejected)return this;var r=setTimeout((function(){n.resolved||n.rejected||n.reject(t||new Error("Promise timed out after "+e+"ms"))}),e);return this.then((function(e){return clearTimeout(r),e}))},t.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},e.resolve=function(t){return t instanceof e?t:$(t)?new e((function(e,n){return t.then(e,n)})):(new e).resolve(t)},e.reject=function(t){return(new e).reject(t)},e.asyncReject=function(t){return(new e).asyncReject(t)},e.all=function(t){var n=new e,r=t.length,o=[];if(!r)return n.resolve(o),n;for(var i=function(e,t,i){return t.then((function(t){o[e]=t,0==(r-=1)&&n.resolve(o)}),(function(e){i.reject(e)}))},a=0;a<t.length;a++){var c=t[a];if(c instanceof e){if(c.resolved){o[a]=c.value,r-=1;continue}}else if(!$(c)){o[a]=c,r-=1;continue}i(a,e.resolve(c),n)}return 0===r&&n.resolve(o),n},e.hash=function(t){var n={};return e.all(Object.keys(t).map((function(r){return e.resolve(t[r]).then((function(e){n[r]=e}))}))).then((function(){return n}))},e.map=function(t,n){return e.all(t.map(n))},e.onPossiblyUnhandledException=function(e){return function(e){return Y.push(e),{cancel:function(){Y.splice(Y.indexOf(e),1)}}}(e)},e.try=function(t,n,r){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.try expected a function");var o;G();try{o=t.apply(n,r||[])}catch(t){return Q(),e.reject(t)}return Q(),e.resolve(o)},e.delay=function(t){return new e((function(e){setTimeout(e,t)}))},e.isPromise=function(t){return!!(t&&t instanceof e)||$(t)},e.flush=function(){return t=B=B||new e,Z(),t;var t},e}();function K(){return(K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ee="Call was rejected by callee.\r\n";function te(e){return void 0===e&&(e=window),"about:"===e.location.protocol}function ne(e){try{return!0}catch(e){}return!1}function re(e){void 0===e&&(e=window);var t=e.location;if(!t)throw new Error("Can not read window location");var n=t.protocol;if(!n)throw new Error("Can not read window protocol");if("file:"===n)return"file://";if("about:"===n){var r=function(e){if(void 0===e&&(e=window),e)try{if(e.parent&&e.parent!==e)return e.parent}catch(e){}}(e);return r&&ne()?re(r):"about://"}var o=t.host;if(!o)throw new Error("Can not read window host");return n+"//"+o}function oe(e){void 0===e&&(e=window);var t=re(e);return t&&e.mockDomain&&0===e.mockDomain.indexOf("mock:")?e.mockDomain:t}var ie=[],ae=[];function ce(e,t){void 0===t&&(t=!0);try{if(e===window)return!1}catch(e){return!0}try{if(!e)return!0}catch(e){return!0}try{if(e.closed)return!0}catch(e){return!e||e.message!==ee}if(t&&function(e){if(!function(e){try{if(e===window)return!0}catch(e){}try{var t=Object.getOwnPropertyDescriptor(e,"location");if(t&&!1===t.enumerable)return!1}catch(e){}try{if(te(e)&&ne())return!0}catch(e){}try{if(re(e)===re(window))return!0}catch(e){}return!1}(e))return!1;try{if(e===window)return!0;if(te(e)&&ne())return!0;if(oe(window)===oe(e))return!0}catch(e){}return!1}(e))try{if(e.mockclosed)return!0}catch(e){}try{if(!e.parent||!e.top)return!0}catch(e){}var n=function(e,t){for(var n=0;n<e.length;n++)try{if(e[n]===t)return n}catch(e){}return-1}(ie,e);if(-1!==n){var r=ae[n];if(r&&function(e){if(!e.contentWindow)return!0;if(!e.parentNode)return!0;var t=e.ownerDocument;return!(!t||!t.documentElement||t.documentElement.contains(e))}(r))return!0}return!1}function ue(e){try{if(e===window)return!0}catch(e){if(e&&e.message===ee)return!0}try{if("[object Window]"==={}.toString.call(e))return!0}catch(e){if(e&&e.message===ee)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(e){if(e&&e.message===ee)return!0}try{if(e&&e.self===e)return!0}catch(e){if(e&&e.message===ee)return!0}try{if(e&&e.parent===e)return!0}catch(e){if(e&&e.message===ee)return!0}try{if(e&&e.top===e)return!0}catch(e){if(e&&e.message===ee)return!0}try{if(e&&"__unlikely_value__"===e.__cross_domain_utils_window_check__)return!1}catch(e){return!0}return!1}function se(e,t){for(var n=0;n<e.length;n++)try{if(e[n]===t)return n}catch(e){}return-1}var le,fe=function(){function e(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__",function(){if("undefined"==typeof WeakMap)return!1;if(void 0===Object.freeze)return!1;try{var e=new WeakMap,t={};return Object.freeze(t),e.set(t,"__testvalue__"),"__testvalue__"===e.get(t)}catch(e){return!1}}())try{this.weakmap=new WeakMap}catch(e){}this.keys=[],this.values=[]}var t=e.prototype;return t._cleanupClosedWindows=function(){for(var e=this.weakmap,t=this.keys,n=0;n<t.length;n++){var r=t[n];if(ue(r)&&ce(r)){if(e)try{e.delete(r)}catch(e){}t.splice(n,1),this.values.splice(n,1),n-=1}}},t.isSafeToReadWrite=function(e){return!ue(e)},t.set=function(e,t){if(!e)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{n.set(e,t)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e))try{var r=this.name,o=e[r];return void(o&&o[0]===e?o[1]=t:Object.defineProperty(e,r,{value:[e,t],writable:!0}))}catch(e){}this._cleanupClosedWindows();var i=this.keys,a=this.values,c=se(i,e);-1===c?(i.push(e),a.push(t)):a[c]=t},t.get=function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{if(t.has(e))return t.get(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e))try{var n=e[this.name];return n&&n[0]===e?n[1]:void 0}catch(e){}this._cleanupClosedWindows();var r=se(this.keys,e);if(-1!==r)return this.values[r]},t.delete=function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{t.delete(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e))try{var n=e[this.name];n&&n[0]===e&&(n[0]=n[1]=void 0)}catch(e){}this._cleanupClosedWindows();var r=this.keys,o=se(r,e);-1!==o&&(r.splice(o,1),this.values.splice(o,1))},t.has=function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{if(t.has(e))return!0}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e))try{var n=e[this.name];return!(!n||n[0]!==e)}catch(e){}return this._cleanupClosedWindows(),-1!==se(this.keys,e)},t.getOrSet=function(e,t){if(this.has(e))return this.get(e);var n=t();return this.set(e,n),n},e}();function pe(e){return e.name||e.__name__||e.displayName||"anonymous"}function de(e,t){try{delete e.name,e.name=t}catch(e){}return e.__name__=e.displayName=t,e}function he(e){try{return JSON.stringify([].slice.call(e),(function(e,t){return"function"==typeof t?"memoize["+function(e){if(le=le||new fe,null==e||"object"!=typeof e&&"function"!=typeof e)throw new Error("Invalid object");var t,n=le.get(e);return n||(n=typeof e+":"+(t="0123456789abcdef","xxxxxxxxxx".replace(/./g,(function(){return t.charAt(Math.floor(Math.random()*t.length))}))+"_"+function(e){if("function"==typeof btoa)return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})));if("undefined"!=typeof Buffer)return Buffer.from(e,"utf8").toString("base64");throw new Error("Can not find window.btoa or Buffer")}((new Date).toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()),le.set(e,n)),n}(t)+"]":t}))}catch(e){throw new Error("Arguments not serializable -- can not be used to memoize")}}function _e(e,t){var n=this;void 0===t&&(t={});var r=new fe,o=function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];var a=r.getOrSet(t.thisNamespace?this:e,(function(){return{}})),c=he(o),u=t.time;if(a[c]&&u&&Date.now()-a[c].time<u&&delete a[c],a[c])return a[c].value;var s=Date.now(),l=e.apply(this,arguments);return a[c]={time:s,value:l},a[c].value};return o.reset=function(){r.delete(t.thisNamespace?n:e)},de(o,pe(e)+"::memoized")}function ve(e,t,n){void 0===n&&(n=[]);var r=e.__inline_memoize_cache__=e.__inline_memoize_cache__||{},o=he(n);return r.hasOwnProperty(o)?r[o]:r[o]=t.apply(void 0,n)}function ye(){}function me(e,t){void 0===t&&(t=Boolean);var n={};for(var r in e)e.hasOwnProperty(r)&&t(e[r],r)&&(n[r]=e[r]);return n}function we(e){return ve(we,(function(){var t={};if(!e)return t;if(-1===e.indexOf("="))return t;for(var n=0,r=e.split("&");n<r.length;n++){var o=r[n];(o=o.split("="))[0]&&o[1]&&(t[decodeURIComponent(o[0])]=decodeURIComponent(o[1]))}return t}),[e])}function be(e,t){return void 0===t&&(t=window),new V((function(n){t.location=e,function(e){return-1===e.indexOf("#")||0!==e.indexOf("#")&&e.split("#")[0]!==window.location.href.split("#")[0]}(e)||n()}))}function ge(){return"undefined"!=typeof window}Object.create(Error.prototype);var ke=[];function Ae(e){var t=e.url,n=e.method,r=void 0===n?"get":n,o=e.headers,i=void 0===o?{}:o,a=e.json,c=e.data,u=e.body,s=e.win,l=void 0===s?window:s,f=e.timeout,p=void 0===f?0:f;return new V((function(e,n){if(a&&c||a&&u||c&&a)throw new Error("Only options.json or options.data or options.body should be passed");for(var o={},s=0,f=Object.keys(i);s<f.length;s++){var d=f[s];o[d.toLowerCase()]=i[d]}a?o["content-type"]=o["content-type"]||"application/json":(c||u)&&(o["content-type"]=o["content-type"]||"application/x-www-form-urlencoded; charset=utf-8"),o.accept=o.accept||"application/json";for(var h=0;h<ke.length;h++)for(var _=(0,ke[h])(),v=0,y=Object.keys(_);v<y.length;v++){var m=y[v];o[m.toLowerCase()]=_[m]}var w=new l.XMLHttpRequest;for(var b in w.addEventListener("load",(function(){var o=function(e){void 0===e&&(e="");for(var t={},n=0,r=e.trim().split("\n");n<r.length;n++){var o=r[n].split(":"),i=o[0],a=o.slice(1);t[i.toLowerCase()]=a.join(":").trim()}return t}(this.getAllResponseHeaders());if(!this.status)return n(new Error("Request to "+r.toLowerCase()+" "+t+" failed: no response status code."));var i=o["content-type"],a=i&&(0===i.indexOf("application/json")||0===i.indexOf("text/json")),c=this.responseText;try{c=JSON.parse(c)}catch(e){if(a)return n(new Error("Invalid json: "+this.responseText+"."))}return e({status:this.status,headers:o,body:c})}),!1),w.addEventListener("error",(function(e){n(new Error("Request to "+r.toLowerCase()+" "+t+" failed: "+e.toString()+"."))}),!1),w.open(r,t,!0),o)o.hasOwnProperty(b)&&w.setRequestHeader(b,o[b]);a?u=JSON.stringify(a):c&&(u=Object.keys(c).map((function(e){return encodeURIComponent(e)+"="+(c?encodeURIComponent(c[e]):"")})).join("&")),w.timeout=p,w.ontimeout=function(){n(new Error("Request to "+r.toLowerCase()+" "+t+" has timed out"))},w.send(u)}))}function Ie(){return new V(ye)}function Te(){return V.resolve()}function De(e){return new V((function(t,n){var r=document.body||document.head;if(!r)return n(new Error("Can not find container for script: "+e));var o=document.createElement("script");o.setAttribute("src",e),o.addEventListener("load",(function(){return t(o)})),o.addEventListener("error",(function(e){return n(e)})),r.appendChild(o)}))}var xe=["warn","error"],Ee=["error","warn","info","debug"];function Se(e){return Ae({url:e.url,method:e.method,headers:e.headers,json:e.json}).then(ye)}function je(e,t){for(var n in t)t.hasOwnProperty(n)&&t[n]&&!e[n]&&(e[n]=t[n])}var Oe,Pe,Ce=((Oe={}).paypal="/smart/checkout/native",Oe.venmo="/smart/checkout/venmo",(Pe={}).paypal="/smart/checkout/native/popup",Pe.venmo="/smart/checkout/venmo/popup","https://www.paypalobjects.com/checkout/js/lib/firebase-app.js");function Ne(){return ve(Ne,(function(){return function(e){var t=e.url,n=e.prefix,r=e.logLevel,o=void 0===r?"warn":r,i=e.transport,a=void 0===i?Se:i,c=e.flushInterval,u=void 0===c?6e4:c,s=[],l=[],f=[],p=[],d=[],h=[];function _(e,t,n){if(ge()&&window.console&&window.console.log&&!(Ee.indexOf(e)>Ee.indexOf(o))){var r=[t];r.push(n),(n.error||n.warning)&&r.push("\n\n",n.error||n.warning);try{window.console[e]&&window.console[e].apply?window.console[e].apply(window.console,r):window.console.log&&window.console.log.apply&&window.console.log.apply(window.console,r)}catch(e){}}}function v(){return V.try((function(){if(ge()&&"file:"!==window.location.protocol&&(s.length||l.length)){for(var e={},n=0;n<p.length;n++)je(e,(0,p[n])(e));for(var r={},o=0;o<h.length;o++)je(r,(0,h[o])(r));var i=a({method:"POST",url:t,headers:r,json:{events:s,meta:e,tracking:l}});return s=[],l=[],i.then(ye)}}))}var y,m,w,b,g=(void 0===m&&(m=50),de((function(){b&&clearTimeout(b);var e=w=w||new V;return b=setTimeout((function(){w=null,b=null,V.try(y).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}))}),m),e}),pe(y=v)+"::promiseDebounced"));function k(e,t,r){if(void 0===r&&(r={}),!ge())return I;n&&(t=n+"_"+t);for(var o=K({},me(r),{timestamp:Date.now().toString()}),i=0;i<f.length;i++)je(o,(0,f[i])(o));return function(e,t,n){s.push({level:e,event:t,payload:n}),-1!==xe.indexOf(e)&&g()}(e,t,o),_(e,t,o),I}function A(e,t){return e.push(t),I}ge()&&function(e,t){!function n(){setTimeout((function(){e(),n()}),t)}()}(g,u);var I={debug:function(e,t){return k("debug",e,t)},info:function(e,t){return k("info",e,t)},warn:function(e,t){return k("warn",e,t)},error:function(e,t){return k("error",e,t)},track:function(e){if(void 0===e&&(e={}),!ge())return I;for(var t=me(e),n=0;n<d.length;n++)je(t,(0,d[n])(t));return _("debug","track",t),l.push(t),I},flush:g,immediateFlush:v,addPayloadBuilder:function(e){return A(f,e)},addMetaBuilder:function(e){return A(p,e)},addTrackingBuilder:function(e){return A(d,e)},addHeaderBuilder:function(e){return A(h,e)},setTransport:function(e){return a=e,I}};return I}({url:"/xoplatform/logger/api/logger"})}))}function Re(e){var t,n=e.accessToken,r=e.method,o=e.url,i=e.data,a=e.headers;if(!n)throw new Error("No access token passed to "+o);var c=K(((t={}).authorization="Bearer "+n,t["content-type"]="application/json",t),a);return Ae({method:r,url:o,headers:c,json:i}).then((function(e){var t=e.status,n=e.body;if(t>=300)throw new Error(o+" returned status: "+t+" (Corr ID: "+e.headers["paypal-debug-id"]+")");return n}))}function He(e){var t,n=e.accessToken,r=e.url,o=e.method,i=void 0===o?"get":o,a=e.json,c=((t={})["x-requested-by"]="smart-payment-buttons",t);return n&&(c["x-paypal-internal-euat"]=n),Ae({url:r,method:i,headers:c,json:a}).then((function(e){var t=e.status,n=e.body,o=e.headers;if("contingency"===n.ack){var i=new Error(n.contingency);throw i.data=n.data,i}if(t>400)throw new Error("Api: "+r+" returned status code: "+t+" (Corr ID: "+o["paypal-debug-id"]+")");if("success"!==n.ack)throw new Error("Api: "+r+" returned ack: "+n.ack+" (Corr ID: "+o["paypal-debug-id"]+")");return n.data}))}function We(e){var t=e.variables,n=e.headers;return Ae({url:"/graphql",method:"POST",json:{query:e.query,variables:void 0===t?{}:t},headers:K({"x-app-name":"smart-payment-buttons"},void 0===n?{}:n)}).then((function(e){var t=e.status,n=e.body,r=n.errors||[];if(r.length){var o=r[0].message||JSON.stringify(r[0]);throw new Error(o)}if(200!==t)throw new Error("/graphql returned status "+t);return n.data}))}function Le(e){return He({method:"post",url:"/smart/api/payment/"+e+"/ectoken"}).then((function(e){return e.token}))}function Ue(e){return He({method:"post",url:"/smart/api/billagmt/subscriptions/"+e+"/cartid"}).then((function(e){return e.token}))}function Me(e,t){var n=e.createOrder,r=e.currency,o=t.createBillingAgreement,i=t.createSubscription,a={},c=function(e){var t=e.facilitatorAccessToken,n=e.intent,r=e.currency,o=e.merchantID,i=e.partnerAttributionID,a=function(e){var t=e.facilitatorAccessToken,n=e.intent,r=e.currency,o=e.merchantID,i=e.partnerAttributionID;return{create:function(e){var a=K({},e);if(a.intent&&a.intent.toLowerCase()!==n)throw new Error("Unexpected intent: "+a.intent+" passed to order.create. Please ensure you are passing /sdk/js?intent="+a.intent.toLowerCase()+" in the paypal script tag.");return(a=K({},a,{intent:n.toUpperCase()})).purchase_units=a.purchase_units.map((function(e){if(e.amount.currency_code&&e.amount.currency_code!==r)throw new Error("Unexpected currency: "+e.amount.currency_code+" passed to order.create. Please ensure you are passing /sdk/js?currency="+e.amount.currency_code+" in the paypal script tag.");var t=e.payee;if(t&&o&&o.length){if(!o[0])throw new Error("Pass merchant-id=XYZ in the paypal script tag.");if(t.merchant_id&&t.merchant_id!==o[0])throw new Error('Expected payee.merchant_id to be "'+o[0]+'"')}return o&&(t=K({},t,{merchant_id:o[0]})),K({},e,{payee:t,amount:K({},e.amount,{currency_code:r})})})),a.application_context=a.application_context||{},function(e,t){var n,r=t.facilitatorAccessToken,o=t.partnerAttributionID;return Ne().info("rest_api_create_order_id"),Re({accessToken:r,method:"post",url:"/v2/checkout/orders",data:e,headers:(n={},n["paypal-partner-attribution-id"]=o||"",n)}).then((function(e){var t,n=e&&e.id;if(!n)throw new Error("Order Api response error:\n\n"+JSON.stringify(e,null,4));return Ne().track(((t={}).transition_name="process_create_order",t.context_type="EC-Token",t.token=n,t.context_id=n,t)),n}))}(a,{facilitatorAccessToken:t,partnerAttributionID:i,forceRestAPI:!1})}}}({facilitatorAccessToken:t,intent:n,currency:r,merchantID:o,partnerAttributionID:i});return function(e){var t=e.facilitatorAccessToken,n=e.intent,r=e.currency,o=e.merchantID,i=e.partnerAttributionID}({facilitatorAccessToken:t,intent:n,currency:r,merchantID:o,partnerAttributionID:i}),{order:a,payment:null}}({facilitatorAccessToken:t.facilitatorAccessToken,intent:e.intent,currency:r,merchantID:e.merchantID,partnerAttributionID:e.partnerAttributionID});return _e((function(){var e=we(window.location.search.slice(1)).orderID;if(e)return V.resolve(e);var t=Date.now();return V.try((function(){return o?o().then(Le):i?i().then(Ue):n?n(a,c):c.order.create({purchase_units:[{amount:{currency_code:r,value:"0.01"}}]})})).then((function(e){var n;if(!e||"string"!=typeof e)throw new Error("Expected an order id to be passed");if(0===e.indexOf("PAY-")||0===e.indexOf("PAYID-"))throw new Error("Do not pass PAY-XXX or PAYID-XXX directly into createOrder. Pass the EC-XXX token instead");var r=Date.now()-t;return Ne().track((n={},n.state_name="smart_button",n.transition_name="process_receive_order",n.context_type="EC-Token",n.context_id=e,n.token=e,n.response_duration=r.toString(),n)).flush(),e}))}))}function ze(e,t){var n=e.intent,r=e.onApprove,o=void 0===r?function(e){return function(t,n){if("capture"===e)return n.order.capture().then(ye);if("authorize"===e)return n.order.authorize().then(ye);throw new Error("Unsupported intent for auto-capture: "+e)}}(n):r,i=e.partnerAttributionID,a=e.onError,c=e.upgradeLSAT,u=void 0!==c&&c,s=t.facilitatorAccessToken,l=t.createOrder;if(!o)throw new Error("Expected onApprove");return _e((function(e,t){var r=e.payerID,c=e.paymentID,f=e.billingToken,p=e.subscriptionID,d=e.buyerAccessToken,h=e.forceRestAPI,_=void 0===h?u:h,v=t.restart;return V.try((function(){if(u)return l().then((function(e){return function(e,t){var n,r=t.buyerAccessToken,o=t.orderID;return We({headers:(n={},n["x-paypal-internal-euat"]=r,n),query:"\n            mutation UpgradeFacilitatorAccessToken(\n                $orderID: String!\n                $buyerAccessToken: String!\n                $facilitatorAccessToken: String!\n            ) {\n                upgradeLowScopeAccessToken(\n                    token: $orderID\n                    buyerAccessToken: $buyerAccessToken\n                    merchantLSAT: $facilitatorAccessToken\n                )\n            }\n        ",variables:{facilitatorAccessToken:e,buyerAccessToken:r,orderID:o}}).then(ye)}(s,{buyerAccessToken:d,orderID:e})}))})).then((function(){return l()})).then((function(e){var t;Ne().info("button_approve").track((t={},t.transition_name="process_checkout_approve",t.token=e,t)).flush();var u={orderID:e,payerID:r,paymentID:c,billingToken:f,subscriptionID:p,facilitatorAccessToken:s},l=function(e){var t=e.intent,n=e.orderID,r=e.paymentID,o=e.payerID,i=e.restart,a=e.subscriptionID,c=e.facilitatorAccessToken,u=e.buyerAccessToken,s=e.partnerAttributionID,l=e.forceRestAPI,f=_e((function(){return function(e,t){return He({accessToken:t.buyerAccessToken,url:"/smart/api/billagmt/subscriptions/"+e})}(a,{buyerAccessToken:u})})),p=_e((function(){return function(e,t){return He({accessToken:t.buyerAccessToken,method:"post",url:"/smart/api/billagmt/subscriptions/"+e+"/activate"})}(a,{buyerAccessToken:u})})),d=function(e){var t=e.intent,n=e.orderID,r=e.restart,o=e.facilitatorAccessToken,i=e.buyerAccessToken,a=e.partnerAttributionID,c=e.forceRestAPI,u=function(e){if(e&&e.data&&e.data.details&&e.data.details.some((function(e){return"INSTRUMENT_DECLINED"===e.issue||"PAYER_ACTION_REQUIRED"===e.issue})))return r().then(Ie);throw new Error("Order could not be captured")},s=_e((function(){return function(e,t){var n,r=t.buyerAccessToken,o=t.forceRestAPI;return void 0!==o&&o?Re({accessToken:t.facilitatorAccessToken,url:"/v2/checkout/orders/"+e,headers:(n={},n["paypal-partner-attribution-id"]=t.partnerAttributionID||"",n)}):He({accessToken:r,url:"/smart/api/order/"+e})}(n,{facilitatorAccessToken:o,buyerAccessToken:i,partnerAttributionID:a,forceRestAPI:c})})),l=_e((function(){if("capture"!==t)throw new Error("Use intent=capture to use client-side capture");return function(e,t){var n,r=t.buyerAccessToken,o=t.forceRestAPI;return void 0!==o&&o?Re({accessToken:t.facilitatorAccessToken,method:"post",url:"/v2/checkout/orders/"+e+"/capture",headers:(n={},n["paypal-partner-attribution-id"]=t.partnerAttributionID||"",n)}):He({accessToken:r,method:"post",url:"/smart/api/order/"+e+"/capture"})}(n,{facilitatorAccessToken:o,buyerAccessToken:i,partnerAttributionID:a,forceRestAPI:c}).finally(s.reset).finally(l.reset).catch(u)})),f=_e((function(){if("authorize"!==t)throw new Error("Use intent=authorize to use client-side authorize");return function(e,t){var n,r=t.buyerAccessToken,o=t.forceRestAPI;return void 0!==o&&o?Re({accessToken:t.facilitatorAccessToken,method:"post",url:"/v2/checkout/orders/"+e+"/authorize",headers:(n={},n["paypal-partner-attribution-id"]=t.partnerAttributionID||"",n)}):He({accessToken:r,method:"post",url:"/smart/api/order/"+e+"/authorize"})}(n,{facilitatorAccessToken:o,buyerAccessToken:i,partnerAttributionID:a,forceRestAPI:c}).finally(s.reset).finally(f.reset).catch(u)}));return{capture:l,authorize:f,patch:function(e){return void 0===e&&(e={}),function(e,t,n){var r,o=n.facilitatorAccessToken,i=n.buyerAccessToken,a=n.partnerAttributionID,c=n.forceRestAPI,u=void 0!==c&&c,s=Array.isArray(t)?{patch:t}:t;return u?Re({accessToken:o,method:"patch",url:"/v2/checkout/orders/"+e,data:s,headers:(r={},r["paypal-partner-attribution-id"]=a||"",r)}):He({accessToken:i,method:"post",url:"/smart/api/order/"+e+"/patch",json:{data:s}})}(n,e,{facilitatorAccessToken:o,buyerAccessToken:i,partnerAttributionID:a,forceRestAPI:c}).catch((function(){throw new Error("Order could not be patched")}))},get:s}}({intent:t,orderID:n,paymentID:r,payerID:o,subscriptionID:a,restart:i,facilitatorAccessToken:c,buyerAccessToken:u,partnerAttributionID:s,forceRestAPI:l});return function(e){var t=e.intent,n=e.paymentID,r=e.payerID,o=e.restart,i=e.facilitatorAccessToken,a=e.buyerAccessToken,c=e.partnerAttributionID;if(n)var u=function(e){if(e&&e.data&&e.data.details&&e.data.details.some((function(e){return"INSTRUMENT_DECLINED"===e.issue||"PAYER_ACTION_REQUIRED"===e.issue})))return o().then(Ie);throw new Error("Order could not be captured")},s=_e((function(){return function(e,t){var n;return Re({accessToken:t.facilitatorAccessToken,url:"/v1/payments/payment/"+e,headers:(n={},n["paypal-partner-attribution-id"]=t.partnerAttributionID||"",n)})}(n,{facilitatorAccessToken:i,buyerAccessToken:a,partnerAttributionID:c})})),l=_e((function(){if("capture"!==t)throw new Error("Use intent=capture to use client-side capture");return function(e,t,n){var r;return Re({accessToken:n.facilitatorAccessToken,method:"post",url:"/v1/payments/payment/"+e+"/execute",headers:(r={},r["paypal-partner-attribution-id"]=n.partnerAttributionID||"",r),data:{payer_id:t}})}(n,r,{facilitatorAccessToken:i,buyerAccessToken:a,partnerAttributionID:c}).finally(s.reset).finally(l.reset).catch(u)}))}({intent:t,orderID:n,paymentID:r,payerID:o,subscriptionID:a,restart:i,facilitatorAccessToken:c,buyerAccessToken:u,partnerAttributionID:s,forceRestAPI:l}),{order:d,payment:null,subscription:{get:f,activate:p},restart:i,redirect:function(e){if(!e)throw new Error("Expected redirect url");if(-1===e.indexOf("://"))throw Ne().warn("redir_url_non_scheme",{url:e}).flush(),new Error("Invalid redirect url: "+e+" - must be fully qualified url");return e.match(/^https?:\/\//)||Ne().warn("redir_url_non_http",{url:e}).flush(),be(e,window.top)}}}({orderID:e,paymentID:c,payerID:r,intent:n,restart:v,subscriptionID:p,facilitatorAccessToken:s,buyerAccessToken:d,partnerAttributionID:i,forceRestAPI:_});return o(u,l).catch((function(e){return V.try((function(){return a(e)})).then((function(){throw e}))}))}))}))}function qe(e,t){var n=e.onCancel,r=void 0===n?Te:n,o=e.onError,i=t.createOrder;return _e((function(){return i().then((function(e){var t;return Ne().info("button_cancel").track((t={},t.transition_name="process_checkout_cancel",t.token=e,t)).flush(),r({orderID:{orderID:e}.orderID},{redirect:function(e){if(!e)throw new Error("Expected redirect url");if(-1===e.indexOf("://"))throw Ne().warn("redir_url_non_scheme",{url:e}).flush(),new Error("Invalid redirect url: "+e+" - must be fully qualified url");return e.match(/^https?:\/\//)||Ne().warn("redir_url_non_http",{url:e}).flush(),be(e,window.top)}})})).catch((function(e){return o(e)}))}))}function Fe(e){return d("style",{nonce:e.cspNonce},e.children)}_e((function(e){return V.try((function(){if(!window.firebase||!window.firebase.auth||!window.firebase.database)return De(Ce).then((function(){return V.all([De("https://www.paypalobjects.com/checkout/js/lib/firebase-auth.js"),De("https://www.paypalobjects.com/checkout/js/lib/firebase-database.js")])}))})).then((function(){var t=window.firebase;if(!t)throw new Error("Firebase failed to load");return t.initializeApp(e),t}))}));var $e,Be,Xe,Ye=[],Je=r.__r,Ze=r.diffed,Ge=r.__c,Qe=r.unmount;function Ve(e){return function(e,t,n){var o=function(e){r.__h&&r.__h(Be);var t=Be.__H||(Be.__H={__:[],__h:[]});return e>=t.__.length&&t.__.push({}),t.__[e]}($e++);return o.__c||(o.__c=Be,o.__=[nt(void 0,t),function(t){var n=e(o.__[0],t);o.__[0]!==n&&(o.__[0]=n,o.__c.setState({}))}]),o.__}(nt,e)}function Ke(){Ye.some((function(e){if(e.__P)try{e.__H.__h.forEach(et),e.__H.__h.forEach(tt),e.__H.__h=[]}catch(t){return r.__e(t,e.__v),!0}})),Ye=[]}function et(e){e.t&&e.t()}function tt(e){var t=e.__();"function"==typeof t&&(e.t=t)}function nt(e,t){return"function"==typeof t?t(e):t}function rt(e){var t=e.fundingOption,n=e.selectWalletItemHandler,r=e.listOpen,o=e.listOpenHandler,i=t.fundingInstrument,a=i&&i.image&&i.image.url&&i.image.url.href,c=i&&i.issuerProductDescription,u=i&&i.instrumentSubType,s=i&&i.lastDigits;return d(_,null,d(Fe,{cspNonce:e.cspNonce},"\n                    .wallet-item  {\n                        white-space: nowrap;\n                        cursor: pointer;\n                        margin-top: 5px;\n                        border-bottom: 1px solid #eee;\n                    }\n\n                    .wallet-item:first-child {\n                        margin-top: 0px;\n                    }\n\n                    .wallet-item:last-child {\n                        border-bottom: 0;\n                    }\n\n                    @media only screen and (min-width: 0px) {\n                        .wallet-item {\n                            height: 50px;\n                        }\n                    }\n\n                    @media only screen and (min-width: 600px) {\n                        .wallet-item {\n                            height: 60px;\n                        }\n                    }\n\n                    .wallet-item-icon-container {\n                        display: inline-block;\n                        vertical-align: top;\n                        text-align: center;\n                        width: 50px;\n                        margin-right: 20px;\n                    }\n\n                    .wallet-item-icon {\n                        max-height: 90%;\n                        max-width: 90%;\n                    }\n\n                    .wallet-item-description {\n                        display: inline-block;\n                        vertical-align: top;\n                    }\n\n                    .wallet-item-name {\n                        font-size: .95em;\n                        height: 50%;\n                    }\n\n                    .wallet-item-details {\n                        height: 50%;\n                        color: #6c7378;\n                        font-size: .80em;\n                    }\n                "),d("div",{class:"wallet-item",onClick:function(){return n(t),void o(!r)}},d("div",{class:"wallet-item-icon-container"},d("img",{src:a,class:"wallet-item-icon"})),d("div",{class:"wallet-item-description"},d("div",{class:"wallet-item-name"},c),d("div",{class:"wallet-item-details"},d("span",{class:"wallet-item-type"},u," "),d("span",{class:"wallet-item-digits"},"•••• ",s)))))}function ot(e){var t=e.cspNonce,n=e.checkoutSession.fundingOptions,r=n[0],o=Ve(!1),i=o[0],a=o[1],c=Ve(r),u=c[0],s=c[1];return d(_,null,d(Fe,{cspNonce:t},"\n                    .wallet {\n                        padding: 5px;\n                    }\n                "),d("div",{class:"wallet"},d(rt,{fundingOption:u,selectWalletItemHandler:s,listOpen:i,listOpenHandler:a}),i&&n.map((function(e){return d(rt,{fundingOption:e,selectWalletItemHandler:s,listOpen:i,listOpenHandler:a})}))))}function it(e){var t=e.cspNonce,n=e.checkoutSession;return d(_,null,d(Fe,{cspNonce:t},"\n                    html, body {\n                        padding: 0;\n                        margin: 0;\n                        width: 100%;\n                        overflow: hidden;\n                    }\n\n                    body {\n                        font-family: Helvetica Neue,HelveticaNeue,HelveticaNeue-Light,Helvetica Neue Light,helvetica,arial,sans-serif;\n                        vertical-align: top;\n                        border-collapse: collapse;\n                    }\n\n                    * {\n                        user-select: none;\n                        cursor: default;\n                        box-sizing: border-box;\n                    }\n                "),d(ot,{cspNonce:t,checkoutSession:n}))}function at(){throw new Error("Not implemented")}function ct(e){return F(d(it,e))}function ut(e){var t,n,o,i,a,l,f,p,h,v,y,m,w,b,g,k,A,I,x,E,S,j,O,P,C,N,R,H,W,L=e.buyerAccessToken,U=e.cspNonce,M=e.checkoutSession;!function(e,t){var n=t.checkoutSession,r=t.buyerAccessToken;(0,e.setup)({},{submit:function(){return function(e,t){var n=t.buyerAccessToken,r=e.onApprove,o=t.checkoutSession.fundingOptions[0].allPlans[0].id;return(0,e.createOrder)().then((function(e){return We({query:"\n            mutation ApproveOrder(\n                $orderID : String!\n                $planID : String!\n            ) {\n                approvePayment(\n                    token: $orderID\n                    selectedPlanId: $planID\n                ) {\n                    buyer {\n                        userId\n                    }\n                }\n            }\n        ",variables:{orderID:(t={orderID:e,planID:o,buyerAccessToken:n}).orderID,planID:t.planID},headers:(r={},r["x-paypal-internal-euat"]=t.buyerAccessToken,r)}).then((function(e){return{payerID:e.approvePayment.buyer.userId}}));var t,r})).then((function(e){return r({payerID:e.payerID},{restart:at})}))}(e,{checkoutSession:n,buyerAccessToken:r})}})}((t={facilitatorAccessToken:e.facilitatorAccessToken},n=t.facilitatorAccessToken,o=window.xprops,i=o.env,a=o.vault,l=o.commit,f=o.locale,p=o.platform,h=o.sessionID,v=o.intent,y=o.walletSessionID,m=o.clientID,w=o.partnerAttributionID,b=o.correlationID,g=o.getParentDomain,k=o.clientAccessToken,A=o.getPageUrl,I=o.remember,x=o.onError,E=o.stageHost,S=o.apiStageHost,j=o.style,O=o.getParent,P=o.currency,C=o.merchantID,N=o.setup,R=void 0===N?Te:N,H="function"==typeof g?g():"unknown",W=Me({createOrder:o.createOrder,currency:P,intent:v,merchantID:C,partnerAttributionID:w},{facilitatorAccessToken:n}),{env:i,style:j,locale:f,sessionID:h,walletSessionID:y,clientID:m,partnerAttributionID:w,correlationID:b,platform:p,currency:P,commit:l,vault:a,merchantDomain:H,getPageUrl:A,rememberFunding:I,getParent:O,setup:R,clientAccessToken:k,onError:x,stageHost:E,apiStageHost:S,createOrder:W,onApprove:ze({onApprove:o.onApprove,intent:v,onError:x,partnerAttributionID:w,upgradeLSAT:!1},{facilitatorAccessToken:n,createOrder:W}),onCancel:qe({onCancel:o.onCancel,onError:x},{facilitatorAccessToken:n,createOrder:W})}),{checkoutSession:M,buyerAccessToken:L}),function(e,t,n){var o,i,a;r.__&&r.__(e,t),i=(o=n===c)?null:t.__k,e=d(_,null,[e]),a=[],T(t,t.__k=e,i||u,u,void 0!==t.ownerSVGElement,i?null:s.slice.call(t.childNodes),a,u,o),D(a,e)}(d(it,{cspNonce:U,checkoutSession:M}),function(){var e=document.body;if(!e)throw new Error("Document body not found");return e}())}r.__r=function(e){Je&&Je(e),$e=0,(Be=e.__c).__H&&(Be.__H.__h.forEach(et),Be.__H.__h.forEach(tt),Be.__H.__h=[])},r.diffed=function(e){Ze&&Ze(e);var t=e.__c;if(t){var n=t.__H;n&&n.__h.length&&(1!==Ye.push(t)&&Xe===r.requestAnimationFrame||((Xe=r.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(r),cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);"undefined"!=typeof window&&(t=requestAnimationFrame(n))})(Ke))}},r.__c=function(e,t){t.some((function(e){try{e.__h.forEach(et),e.__h=e.__h.filter((function(e){return!e.__||tt(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],r.__e(n,e.__v)}})),Ge&&Ge(e,t)},r.unmount=function(e){Qe&&Qe(e);var t=e.__c;if(t){var n=t.__H;if(n)try{n.__.forEach((function(e){return e.t&&e.t()}))}catch(e){r.__e(e,t.__v)}}},n.d(t,"setupWallet",(function(){return ut})),n.d(t,"renderWallet",(function(){return ct}))}])}));
//# sourceMappingURL=smart-wallet.min.js.map